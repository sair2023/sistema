(self.webpackChunkspire=self.webpackChunkspire||[]).push([[512],{512:(j,D,m)=>{"use strict";m.r(D),m.d(D,{EmpleadoModule:()=>mt});var v=m(6814),S=m(4622),M=m(2787),E=m(5861),c=m(5313),A=m(1476),f=m(3566),I=m(3519),g=m.n(I),u=m(7930),_=m.n(u),e=m(5879),p=m(2922),h=m(1286),w=m(3284),l=m(6223),y=m(3680),Z=m(2296),C=m(8034),b=m(9347),T=m(4170),q=m(617),N=m(2032),U=m(6007),J=m(7466),O=m(8525),B=m(5843);function W(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"div",22)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Nombre de la Pareja"),e.qZA(),e.TgZ(4,"input",45),e.NdJ("ngModelChange",function(o){e.CHM(i);const n=e.oxw();return e.KtG(n.empleados.pareja=o)}),e.qZA(),e.TgZ(5,"mat-icon",14),e._uU(6,"wc"),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8," El nombre completo es requerido "),e.qZA()()()}if(2&a){const i=e.oxw();e.xp6(4),e.Q6J("ngModel",i.empleados.pareja)}}function K(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"div",22)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Numero de Hijos"),e.qZA(),e.TgZ(4,"input",46),e.NdJ("ngModelChange",function(o){e.CHM(i);const n=e.oxw();return e.KtG(n.empleados.num_hijos=o)}),e.qZA(),e.TgZ(5,"mat-icon",14),e._uU(6,"add_circle"),e.qZA(),e.TgZ(7,"mat-error"),e._uU(8," El nombre completo es requerido "),e.qZA()()()}if(2&a){const i=e.oxw();e.xp6(4),e.Q6J("ngModel",i.empleados.num_hijos)}}function X(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"div",10)(1,"div",47)(2,"mat-label",48),e._uU(3,"Ingrese el nombre de los hijos"),e.qZA(),e.TgZ(4,"ckeditor",49),e.NdJ("ngModelChange",function(o){e.CHM(i);const n=e.oxw();return e.KtG(n.empleados.nom_hijos=o)}),e.qZA()()()}if(2&a){const i=e.oxw();e.xp6(4),e.Q6J("editor",i.Editor)("ngModel",i.empleados.nom_hijos)}}function V(a,r){if(1&a&&(e.TgZ(0,"mat-option",50),e._uU(1),e.qZA()),2&a){const i=r.$implicit;e.Q6J("value",i._id),e.xp6(1),e.Oqu(i.titulo)}}let ee=(()=>{var a;class r{constructor(t,o,n){this._authService=t,this._empleadoService=o,this._departamentoService=n,this.empleados={nom_hijos:"No tiene",num_hijos:0,pareja:"No tiene"},this.departamentos=[],this.Editor=_(),this.file=void 0,this.imgSelect="assets/images/banner/1.png",this.token=this._authService.getToken()}ngOnInit(){this.obtener_datosDepa()}oncivil(){this.empleados.civil||(this.empleados.pareja="")}offcivil(){this.empleados.civil&&(this.empleados.pareja="No tiene Pareja")}onTieneHijosChange(){this.empleados.tiene_hijos||(this.empleados.num_hijos=null,this.empleados.nom_hijos="")}offTieneHijosChange(){this.empleados.tiene_hijos&&(this.empleados.num_hijos=0,this.empleados.nom_hijos="No tiene hijos")}obtener_datosDepa(){this._departamentoService.listar_departamento(this.token).subscribe(t=>{console.log("datos obtenidos",t),this.departamentos=t},t=>{console.log("Error al obtener datos",t)})}registro(t){t.valid?(console.log(this.empleados),console.log(this.file),this._empleadoService.registro_empleado(this.empleados,this.file,this.token).subscribe(o=>{g().fire({title:"Se registro correctamente el empleado",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#3a8f40"}).then(n=>{n.isConfirmed&&location.reload()}),console.log(o)},o=>{console.log(o)})):(g().fire({title:"No se han guardado los datos correctamente",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1}),$("#input-portada").text("Seleccionar imagen"),this.imgSelect="assets/images/banner/1.png",this.file=void 0)}CargarImagen(t){var o;if(t.target.files&&t.target.files[0]?o=t.target.files[0]:g().fire({title:"No se hay una imagen",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1}),o.size<=4e6)if("image/png"==o.type||"image/webp"==o.type||"image/jpg"==o.type||"image/jpeg"==o.type){const n=new FileReader;n.onload=s=>this.imgSelect=n.result,n.readAsDataURL(o),this.file=o}else g().fire({title:"El formato de la imagen no es el permitido",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1}),this.imgSelect="assets/images/banner/1.png",this.file=void 0}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(h.i),e.Y36(w._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-crear-empleado"]],decls:145,vars:22,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mode","indeterminate","value","100"],["mat-dialog-content",""],[1,"register-form","m-4",3,"ngSubmit"],["registroForm","ngForm"],[1,"row"],[1,"col-xl-4","col-lg-6","col-md-12","col-sm-12","mb-3"],["appearance","outline",1,"example-full-width"],["matInput","","type","text","required","","name","nombre",3,"ngModel","ngModelChange"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],["matInput","","type","text","required","","name","apellido",3,"ngModel","ngModelChange"],["matInput","","type","number","required","","name","telefono",3,"ngModel","ngModelChange"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","type","text","required","","name","direccion",3,"ngModel","ngModelChange"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["required","","name","civil",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-3"],["required","","name","tiene_hijos",3,"ngModel","ngModelChange"],[3,"value","change"],["class","col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3",4,"ngIf"],["class","row",4,"ngIf"],["matInput","","type","number","required","","name","nit",3,"ngModel","ngModelChange"],["matInput","","type","number","required","","required","","name","dpi",3,"ngModel","ngModelChange"],["matInput","","required","","name","fecha_contra",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","required","","name","salario_base",3,"ngModel","ngModelChange"],["required","","name","deparId",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"col-lg-12","form-group"],[1,"custom-file"],["type","file","id","file-input",1,"custom-file-input",3,"change"],["id","input-portada","for","file-input",1,"custom-file-label",2,"white-space","nowrap","overflow","hidden"],[1,"col-lg-12"],["alt","Rounded image",1,"img-thumbnail",3,"src"],[1,"example-button-row"],["mat-raised-button","","color","primary",2,"color","white !important"],["mat-raised-button","","color","warn","tabindex","-1","matDialogClose",""],["matInput","","type","text","name","pareja",3,"ngModel","ngModelChange"],["matInput","","type","number","name","num_hijos",3,"ngModel","ngModelChange"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12","mb-3"],[2,"font-weight","400"],["name","nom_hijos",3,"editor","ngModel","ngModelChange"],[3,"value"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Registro de Empleados"),e.qZA()()()(),e._uU(7," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(8,"button",5)(9,"mat-icon"),e._uU(10,"close"),e.qZA()()(),e._UZ(11,"mat-progress-bar",6),e.TgZ(12,"div",7)(13,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(n);const d=e.MAs(14);return e.KtG(o.registro(d))}),e.TgZ(15,"div",10)(16,"div",11)(17,"mat-form-field",12)(18,"mat-label"),e._uU(19,"Nombres"),e.qZA(),e.TgZ(20,"input",13),e.NdJ("ngModelChange",function(d){return o.empleados.nombre=d}),e.qZA(),e.TgZ(21,"mat-icon",14),e._uU(22,"face"),e.qZA(),e.TgZ(23,"mat-error"),e._uU(24," Los nombres son requeridos "),e.qZA()()(),e.TgZ(25,"div",11)(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Apellidos"),e.qZA(),e.TgZ(29,"input",15),e.NdJ("ngModelChange",function(d){return o.empleados.apellido=d}),e.qZA(),e.TgZ(30,"mat-icon",14),e._uU(31,"face"),e.qZA(),e.TgZ(32,"mat-error"),e._uU(33," Los apellidos son requeridos "),e.qZA()()(),e.TgZ(34,"div",11)(35,"mat-form-field",12)(36,"mat-label"),e._uU(37,"Telefono"),e.qZA(),e.TgZ(38,"input",16),e.NdJ("ngModelChange",function(d){return o.empleados.telefono=d}),e.qZA(),e.TgZ(39,"mat-icon",14),e._uU(40,"call"),e.qZA(),e.TgZ(41,"mat-error"),e._uU(42," El numero de telefono es requeridos "),e.qZA()()()(),e.TgZ(43,"div",10)(44,"div",17)(45,"mat-form-field",12)(46,"mat-label"),e._uU(47,"Direccion"),e.qZA(),e.TgZ(48,"textarea",18),e.NdJ("ngModelChange",function(d){return o.empleados.direccion=d}),e.qZA(),e.TgZ(49,"mat-icon",14),e._uU(50,"add_location"),e.qZA(),e.TgZ(51,"mat-error"),e._uU(52," La Direccion es requerida "),e.qZA()()()(),e.TgZ(53,"div",10)(54,"div",19)(55,"mat-form-field",12)(56,"mat-label"),e._uU(57,"Seleccionar Estado Civil"),e.qZA(),e.TgZ(58,"mat-select",20),e.NdJ("ngModelChange",function(d){return o.empleados.civil=d}),e.TgZ(59,"mat-option",21),e.NdJ("onSelectionChange",function(){return o.oncivil()}),e._uU(60,"Casado | Casada"),e.qZA(),e.TgZ(61,"mat-option",21),e.NdJ("onSelectionChange",function(){return o.offcivil()}),e._uU(62,"Soltero | Soltera"),e.qZA()(),e.TgZ(63,"mat-icon",14),e._uU(64,"favorite"),e.qZA(),e.TgZ(65,"mat-error"),e._uU(66," El estado civil es requerido "),e.qZA()()(),e.TgZ(67,"div",22)(68,"mat-radio-group",23),e.NdJ("ngModelChange",function(d){return o.empleados.tiene_hijos=d}),e.TgZ(69,"mat-label"),e._uU(70,"El empleado tiene hijos"),e.qZA(),e.TgZ(71,"mat-radio-button",24),e.NdJ("change",function(){return o.onTieneHijosChange()}),e._uU(72,"S\xed"),e.qZA(),e.TgZ(73,"mat-radio-button",24),e.NdJ("change",function(){return o.offTieneHijosChange()}),e._uU(74,"No"),e.qZA()()()(),e.TgZ(75,"div",10),e.YNc(76,W,9,1,"div",25),e.YNc(77,K,9,1,"div",25),e.YNc(78,X,5,2,"div",26),e.qZA(),e._UZ(79,"br"),e.TgZ(80,"div",10)(81,"div",11)(82,"mat-form-field",12)(83,"mat-label"),e._uU(84,"NIT"),e.qZA(),e.TgZ(85,"input",27),e.NdJ("ngModelChange",function(d){return o.empleados.nit=d}),e.qZA(),e.TgZ(86,"mat-icon",14),e._uU(87,"domain"),e.qZA(),e.TgZ(88,"mat-error"),e._uU(89," El NIT es requerido"),e.qZA()()(),e.TgZ(90,"div",11)(91,"mat-form-field",12)(92,"mat-label"),e._uU(93,"DPI"),e.qZA(),e.TgZ(94,"input",28),e.NdJ("ngModelChange",function(d){return o.empleados.dpi=d}),e.qZA(),e.TgZ(95,"mat-icon",14),e._uU(96,"contact_mail"),e.qZA(),e.TgZ(97,"mat-error"),e._uU(98," El DPI es requerido"),e.qZA()()(),e.TgZ(99,"div",11)(100,"mat-form-field",12)(101,"mat-label"),e._uU(102,"Fecha de Contratacion"),e.qZA(),e.TgZ(103,"input",29),e.NdJ("ngModelChange",function(d){return o.empleados.fecha_contra=d}),e.qZA(),e._UZ(104,"mat-datepicker-toggle",30)(105,"mat-datepicker",null,31),e.TgZ(107,"mat-error"),e._uU(108," La fecha es requerida"),e.qZA()()()(),e.TgZ(109,"div",10)(110,"div",22)(111,"mat-form-field",12)(112,"mat-label"),e._uU(113,"Salario Base"),e.qZA(),e.TgZ(114,"input",32),e.NdJ("ngModelChange",function(d){return o.empleados.salario_base=d}),e.qZA(),e.TgZ(115,"mat-icon",14),e._uU(116,"attach_money"),e.qZA(),e.TgZ(117,"mat-error"),e._uU(118," El salario es requerido"),e.qZA()()(),e.TgZ(119,"div",22)(120,"mat-form-field",12)(121,"mat-label"),e._uU(122,"Seleccionar el departamento de trabajo"),e.qZA(),e.TgZ(123,"mat-select",33),e.NdJ("ngModelChange",function(d){return o.empleados.deparId=d}),e.YNc(124,V,2,2,"mat-option",34),e.qZA(),e.TgZ(125,"mat-icon",14),e._uU(126,"business_center"),e.qZA(),e.TgZ(127,"mat-error"),e._uU(128," El departamento de trabajo es requerido"),e.qZA()()()(),e.TgZ(129,"div",35)(130,"div",10)(131,"div",36)(132,"div",37)(133,"input",38),e.NdJ("change",function(d){return o.CargarImagen(d)}),e.qZA(),e.TgZ(134,"label",39),e._uU(135,"Seleccionar imagen"),e.qZA()()(),e.TgZ(136,"div",40),e._UZ(137,"img",41),e.qZA()()(),e.TgZ(138,"div",10)(139,"div",17)(140,"div",42)(141,"button",43),e._uU(142,"Guardar"),e.qZA(),e.TgZ(143,"button",44),e._uU(144,"Cancelar"),e.qZA()()()()()()()}if(2&t){const n=e.MAs(106);e.xp6(20),e.Q6J("ngModel",o.empleados.nombre),e.xp6(9),e.Q6J("ngModel",o.empleados.apellido),e.xp6(9),e.Q6J("ngModel",o.empleados.telefono),e.xp6(10),e.Q6J("ngModel",o.empleados.direccion),e.xp6(10),e.Q6J("ngModel",o.empleados.civil),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(7),e.Q6J("ngModel",o.empleados.tiene_hijos),e.xp6(3),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(3),e.Q6J("ngIf",o.empleados.civil),e.xp6(1),e.Q6J("ngIf",o.empleados.tiene_hijos),e.xp6(1),e.Q6J("ngIf",o.empleados.tiene_hijos),e.xp6(7),e.Q6J("ngModel",o.empleados.nit),e.xp6(9),e.Q6J("ngModel",o.empleados.dpi),e.xp6(9),e.Q6J("matDatepicker",n)("ngModel",o.empleados.fecha_contra),e.xp6(1),e.Q6J("for",n),e.xp6(10),e.Q6J("ngModel",o.empleados.salario_base),e.xp6(9),e.Q6J("ngModel",o.empleados.deparId),e.xp6(1),e.Q6J("ngForOf",o.departamentos),e.xp6(13),e.Q6J("src",o.imgSelect,e.LSH)}},dependencies:[v.sg,v.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.On,l.F,y.ey,Z.lW,Z.RK,C.Mq,C.hl,C.nW,b.ZT,b.xY,T.KE,T.hX,T.TO,T.R9,q.Hw,N.Nt,U.pW,J.VQ,J.U0,O.gD,B.u]}),r})(),te=(()=>{var a;class r{constructor(t,o){this._authService=t,this._deparService=o,this.departamentos={},this.token=this._authService.getToken()}ngOnInit(){}registro(t){t.valid?(console.log(this.departamentos),this._deparService.registro_departamento(this.departamentos,this.token).subscribe(o=>{console.log(o),g().fire({title:"Se registro correctamente el departamento de trabajo",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#3a8f40"}).then(n=>{n.isConfirmed&&location.reload()}),console.log(o)},o=>{g().fire({title:"Ya existe un departamento registrado con el mismo nombre.",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1}),console.log(o)})):g().fire({title:"Formulario vacio",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1})}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(w._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-crear-depa"]],decls:32,vars:1,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mat-dialog-content",""],["mode","indeterminate","value","100"],[1,"register-form","m-4",3,"ngSubmit"],["registroForm","ngForm"],[1,"row"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","type","text","placeholder","Ingrese el nombre de usuario","required","","name","titulo",3,"ngModel","ngModelChange"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"example-button-row"],["mat-raised-button","","color","primary",2,"color","white !important"],["mat-raised-button","","color","warn","tabindex","-1","matDialogClose",""]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Registro de Departamento de Trabajo"),e.qZA()()()(),e._uU(7," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(8,"button",5)(9,"mat-icon"),e._uU(10,"close"),e.qZA()()(),e.TgZ(11,"div",6),e._UZ(12,"mat-progress-bar",7),e.TgZ(13,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(n);const d=e.MAs(14);return e.KtG(o.registro(d))}),e.TgZ(15,"div",10)(16,"div",11)(17,"mat-form-field",12)(18,"mat-label"),e._uU(19,"Titulo"),e.qZA(),e.TgZ(20,"input",13),e.NdJ("ngModelChange",function(d){return o.departamentos.titulo=d}),e.qZA(),e.TgZ(21,"mat-icon",14),e._uU(22,"record_voice_over"),e.qZA(),e.TgZ(23,"mat-error"),e._uU(24," Los nombres son requeridos "),e.qZA()()()(),e.TgZ(25,"div",10)(26,"div",15)(27,"div",16)(28,"button",17),e._uU(29,"Guardar"),e.qZA(),e.TgZ(30,"button",18),e._uU(31,"Cancelar"),e.qZA()()()()()()()}2&t&&(e.xp6(20),e.Q6J("ngModel",o.departamentos.titulo))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,Z.lW,Z.RK,b.ZT,b.xY,T.KE,T.hX,T.TO,T.R9,q.Hw,N.Nt,U.pW]}),r})();var k=m(2596);function oe(a,r){if(1&a&&(e.TgZ(0,"th",17),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ","acciones"===i?"Acciones":e.lcZ(2,1,i)," ")}}function ae(a,r){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const i=e.oxw().$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[t]," ")}}function ne(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.eliminarDepa(o._id))}),e.TgZ(1,"mat-icon",22),e._uU(2,"delete"),e.qZA()()}}function ie(a,r){if(1&a&&(e.TgZ(0,"td",18),e.YNc(1,ae,2,1,"ng-container",19),e.YNc(2,ne,3,0,"ng-template",null,20,e.W1O),e.qZA()),2&a){const i=e.MAs(3),t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","acciones"!==t)("ngIfElse",i)}}function re(a,r){1&a&&(e.ynx(0,14),e.YNc(1,oe,3,3,"th",15),e.YNc(2,ie,4,2,"td",16),e.BQk()),2&a&&e.Q6J("matColumnDef",r.$implicit)}function le(a,r){1&a&&e._UZ(0,"tr",23)}function se(a,r){1&a&&e._UZ(0,"tr",24)}const de=function(){return[5,10,25,100]};let me=(()=>{var a;class r{constructor(t,o){this._authService=t,this._departamentoService=o,this.departamentos={},this.columnas=["titulo","acciones"],this.token=this._authService.getToken()}ngOnInit(){this.obtener_datos()}obtener_datos(){this._departamentoService.listar_departamento(this.token).subscribe(t=>{console.log("datos obtenidos",t),this.departamentos=t,this.dataSource=new c.by(this.departamentos),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,console.log(this.dataSource)},t=>{console.log("Error al obtener datos",t)})}eliminarDepa(t){var n,o=this;g().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n eliminar\xe1 el Departamento. \xbfEst\xe1s seguro de que deseas continuar?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",confirmButtonColor:"#3a8f40",cancelButtonText:"Cancelar",cancelButtonColor:"#FF0000"}).then(function(s){return(n=n||(0,E.Z)(function*(d){if(d.isConfirmed)try{const x=yield o._departamentoService.eliminar_departamento(t,o.token).toPromise();console.log("Departamento eliminado con \xe9xito:",x),g().fire("Departamento eliminado","El Departamento ha sido eliminado con \xe9xito","success").then(()=>{location.reload()})}catch(x){console.error("Error al eliminar el departamento:",x),g().fire("Error","El departamento esta siendo utilizado en un empleado","error")}})).apply(this,arguments)})}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(w._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mostrar-depa"]],viewQuery:function(t,o){if(1&t&&(e.Gf(f.YE,5),e.Gf(A.NW,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.sort=n.first),e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:19,vars:6,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mat-dialog-content",""],["mode","indeterminate","value","100"],[1,"body","table-responsive"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["acciones",""],["mat-icon-button","","matTooltip","Eliminar Usuario",3,"click"],[2,"color","red"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Listado de Departamentos de Trabajos"),e.qZA()()()(),e._uU(7," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(8,"button",5)(9,"mat-icon"),e._uU(10,"close"),e.qZA()()(),e.TgZ(11,"div",6),e._UZ(12,"mat-progress-bar",7),e.TgZ(13,"div",8)(14,"table",9),e.YNc(15,re,3,1,"ng-container",10),e.YNc(16,le,1,0,"tr",11),e.YNc(17,se,1,0,"tr",12),e.qZA(),e._UZ(18,"mat-paginator",13),e.qZA()()()),2&t&&(e.xp6(14),e.Q6J("dataSource",o.dataSource),e.xp6(1),e.Q6J("ngForOf",o.columnas),e.xp6(1),e.Q6J("matHeaderRowDef",o.columnas),e.xp6(1),e.Q6J("matRowDefColumns",o.columnas),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,de)))},dependencies:[v.sg,v.O5,Z.RK,b.ZT,b.xY,q.Hw,A.NW,U.pW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,k.gM,v.rS]}),r})();var Q=m(5074);function ce(a,r){if(1&a&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&a){const i=r.$implicit;e.Q6J("value",i._id),e.xp6(1),e.Oqu(i.titulo)}}let pe=(()=>{var a;class r{constructor(t,o,n,s,d){this._authService=t,this._empleadoService=o,this._departamentoService=n,this.data=s,this.formBuilder=d,this.Editor=_(),this.departamentos=[],this.empleados={},this.url=Q.a.url,console.log("ID del empleado recibido:",this.data.empleId),this.token=this._authService.getToken(),this.empleadoForm=this.formBuilder.group({nombre:["",l.kI.required],apellido:["",l.kI.required],telefono:["",l.kI.required],direccion:["",l.kI.required],civil:["",l.kI.required],tiene_hijos:["",l.kI.required],pareja:["",l.kI.required],num_hijos:["",l.kI.required],nom_hijos:["",l.kI.required],fecha_contra:["",l.kI.required],nit:["",l.kI.required],dpi:["",l.kI.required],salario_base:["",l.kI.required],deparId:["",l.kI.required],foto:["",l.kI.required]})}ngOnInit(){this.id=this.data.empleId,this.obtenerEmpleadoId(this.id),this.obtener_datosDepa()}obtenerEmpleadoId(t){console.log("Obteniendo empleado por ID:",t),this._empleadoService.obtener_empleados(t,this.token).subscribe(o=>{o.data&&(this.empleados=o.data,this.empleadoForm.patchValue(this.empleados),this.imgSelect=this.url+"obtener_foto/"+this.empleados.foto)},o=>{console.error("Error al obtener el cupon:",o)})}CargarImagen(t){var o;if(t.target.files&&t.target.files[0]&&(o=t.target.files[0]).size<=4e6){if("image/png"==o.type||"image/webp"==o.type||"image/jpg"==o.type||"image/jpeg"==o.type){const n=new FileReader;n.onload=s=>this.imgSelect=n.result,console.log(this.imgSelect),n.readAsDataURL(o),this.file=o}this.file=o,this.empleadoForm.patchValue({foto:o})}}actualizar(){const t=this.empleadoForm.value,o=this.empleadoForm.get("foto").value;console.log(t),this._empleadoService.actualizar_empleado(this.id,t,o,this.token).subscribe(n=>{g().fire({title:"Se actualiz\xf3 correctamente los datos del empleado",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#3a8f40"}).then(s=>{s.isConfirmed&&location.reload()}),console.log("Empleado actualizado con \xe9xito:",n)},n=>{g().fire({title:"No se han actualizado los datos",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1}),console.error("Error al actualizar el empleado:",n)})}obtener_datosDepa(){this._departamentoService.listar_departamento(this.token).subscribe(t=>{console.log("datos obtenidos",t),this.departamentos=t},t=>{console.log("Error al obtener datos",t)})}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(h.i),e.Y36(w._),e.Y36(b.WI),e.Y36(l.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-editar-empleado"]],decls:164,vars:10,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mode","indeterminate","value","100"],["mat-dialog-content",""],[1,"register-form","m-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-4","col-lg-6","col-md-12","col-sm-12","mb-3"],["appearance","outline",1,"example-full-width"],["matInput","","type","text","required","","formControlName","nombre"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],["matInput","","type","text","required","","formControlName","apellido"],["matInput","","type","number","required","","formControlName","telefono"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","type","text","required","","formControlName","direccion"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["required","","formControlName","civil"],[3,"value"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-3"],["required","","formControlName","tiene_hijos"],["matInput","","type","text","formControlName","pareja"],["matInput","","type","number","formControlName","num_hijos"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12","mb-3"],[2,"font-weight","400"],["formControlName","nom_hijos",3,"editor"],["matInput","","type","number","required","","formControlName","nit"],["matInput","","type","number","required","","formControlName","dpi"],["matInput","","required","","formControlName","fecha_contra",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","type","number","required","","formControlName","salario_base"],["required","","formControlName","deparId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"col-lg-12","form-group"],[1,"custom-file"],["type","file","id","file-input",1,"custom-file-input",3,"change"],["id","input-portada","for","file-input",1,"custom-file-label",2,"white-space","nowrap","overflow","hidden"],[1,"col-lg-12"],["alt","Rounded image",1,"img-thumbnail",3,"src"],[1,"example-button-row"],["mat-raised-button","","color","primary",2,"color","white !important"],["mat-raised-button","","color","warn","tabindex","-1","matDialogClose",""]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Actualizar datos del empleado"),e.qZA()()()(),e._uU(7," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(8,"button",5)(9,"mat-icon"),e._uU(10,"close"),e.qZA()()(),e._UZ(11,"mat-progress-bar",6),e.TgZ(12,"div",7)(13,"form",8),e.NdJ("ngSubmit",function(){return o.actualizar()}),e.TgZ(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),e._uU(18,"Nombres"),e.qZA(),e._UZ(19,"input",12),e.TgZ(20,"mat-icon",13),e._uU(21,"face"),e.qZA(),e.TgZ(22,"mat-error"),e._uU(23," Los nombres son requeridos "),e.qZA()()(),e.TgZ(24,"div",10)(25,"mat-form-field",11)(26,"mat-label"),e._uU(27,"Apellidos"),e.qZA(),e._UZ(28,"input",14),e.TgZ(29,"mat-icon",13),e._uU(30,"face"),e.qZA(),e.TgZ(31,"mat-error"),e._uU(32," Los apellidos son requeridos "),e.qZA()()(),e.TgZ(33,"div",10)(34,"mat-form-field",11)(35,"mat-label"),e._uU(36,"Telefono"),e.qZA(),e._UZ(37,"input",15),e.TgZ(38,"mat-icon",13),e._uU(39,"call"),e.qZA(),e.TgZ(40,"mat-error"),e._uU(41," El numero de telefono es requeridos "),e.qZA()()()(),e.TgZ(42,"div",9)(43,"div",16)(44,"mat-form-field",11)(45,"mat-label"),e._uU(46,"Direccion"),e.qZA(),e._UZ(47,"textarea",17),e.TgZ(48,"mat-icon",13),e._uU(49,"add_location"),e.qZA(),e.TgZ(50,"mat-error"),e._uU(51," La Direccion es requerida "),e.qZA()()()(),e.TgZ(52,"div",9)(53,"div",18)(54,"mat-form-field",11)(55,"mat-label"),e._uU(56,"Seleccionar Estado Civil"),e.qZA(),e.TgZ(57,"mat-select",19)(58,"mat-option",20),e._uU(59,"Casado | Casada"),e.qZA(),e.TgZ(60,"mat-option",20),e._uU(61,"Soltero | Soltera"),e.qZA()(),e.TgZ(62,"mat-icon",13),e._uU(63,"favorite"),e.qZA(),e.TgZ(64,"mat-error"),e._uU(65," El estado civil es requerido "),e.qZA()()(),e.TgZ(66,"div",21)(67,"mat-radio-group",22)(68,"mat-label"),e._uU(69,"El empleado tiene hijos"),e.qZA(),e.TgZ(70,"mat-radio-button",20),e._uU(71,"S\xed"),e.qZA(),e.TgZ(72,"mat-radio-button",20),e._uU(73,"No"),e.qZA()()()(),e.TgZ(74,"div",9)(75,"div",21)(76,"mat-form-field",11)(77,"mat-label"),e._uU(78,"Nombre de la Pareja"),e.qZA(),e._UZ(79,"input",23),e.TgZ(80,"mat-icon",13),e._uU(81,"wc"),e.qZA(),e.TgZ(82,"mat-error"),e._uU(83," El nombre completo es requerido "),e.qZA()()(),e.TgZ(84,"div",21)(85,"mat-form-field",11)(86,"mat-label"),e._uU(87,"Numero de Hijos"),e.qZA(),e._UZ(88,"input",24),e.TgZ(89,"mat-icon",13),e._uU(90,"add_circle"),e.qZA(),e.TgZ(91,"mat-error"),e._uU(92," El nombre completo es requerido "),e.qZA()()(),e.TgZ(93,"div",9)(94,"div",25)(95,"mat-label",26),e._uU(96,"Ingrese el nombre de los hijos"),e.qZA(),e._UZ(97,"ckeditor",27),e.qZA()()(),e._UZ(98,"br"),e.TgZ(99,"div",9)(100,"div",10)(101,"mat-form-field",11)(102,"mat-label"),e._uU(103,"NIT"),e.qZA(),e._UZ(104,"input",28),e.TgZ(105,"mat-icon",13),e._uU(106,"domain"),e.qZA(),e.TgZ(107,"mat-error"),e._uU(108," El NIT es requerido"),e.qZA()()(),e.TgZ(109,"div",10)(110,"mat-form-field",11)(111,"mat-label"),e._uU(112,"DPI"),e.qZA(),e._UZ(113,"input",29),e.TgZ(114,"mat-icon",13),e._uU(115,"contact_mail"),e.qZA(),e.TgZ(116,"mat-error"),e._uU(117," El DPI es requerido"),e.qZA()()(),e.TgZ(118,"div",10)(119,"mat-form-field",11)(120,"mat-label"),e._uU(121,"Fecha de Contratacion"),e.qZA(),e._UZ(122,"input",30)(123,"mat-datepicker-toggle",31)(124,"mat-datepicker",null,32),e.TgZ(126,"mat-error"),e._uU(127," La fecha es requerida"),e.qZA()()()(),e.TgZ(128,"div",9)(129,"div",21)(130,"mat-form-field",11)(131,"mat-label"),e._uU(132,"Salario Base"),e.qZA(),e._UZ(133,"input",33),e.TgZ(134,"mat-icon",13),e._uU(135,"attach_money"),e.qZA(),e.TgZ(136,"mat-error"),e._uU(137," El salario es requerido"),e.qZA()()(),e.TgZ(138,"div",21)(139,"mat-form-field",11)(140,"mat-label"),e._uU(141,"Seleccionar el departamento de trabajo"),e.qZA(),e.TgZ(142,"mat-select",34),e.YNc(143,ce,2,2,"mat-option",35),e.qZA(),e.TgZ(144,"mat-icon",13),e._uU(145,"business_center"),e.qZA(),e.TgZ(146,"mat-error"),e._uU(147," El departamento de trabajo es requerido"),e.qZA()()()(),e.TgZ(148,"div",36)(149,"div",9)(150,"div",37)(151,"div",38)(152,"input",39),e.NdJ("change",function(s){return o.CargarImagen(s)}),e.qZA(),e.TgZ(153,"label",40),e._uU(154,"Seleccionar imagen"),e.qZA()()(),e.TgZ(155,"div",41),e._UZ(156,"img",42),e.qZA()()(),e.TgZ(157,"div",9)(158,"div",16)(159,"div",43)(160,"button",44),e._uU(161,"Guardar"),e.qZA(),e.TgZ(162,"button",45),e._uU(163,"Cancelar"),e.qZA()()()()()()()),2&t){const n=e.MAs(125);e.xp6(13),e.Q6J("formGroup",o.empleadoForm),e.xp6(45),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(10),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(25),e.Q6J("editor",o.Editor),e.xp6(25),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(20),e.Q6J("ngForOf",o.departamentos),e.xp6(13),e.Q6J("src",o.imgSelect,e.LSH)}},dependencies:[v.sg,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.sg,l.u,y.ey,Z.lW,Z.RK,C.Mq,C.hl,C.nW,b.ZT,b.xY,T.KE,T.hX,T.TO,T.R9,q.Hw,N.Nt,U.pW,J.VQ,J.U0,O.gD,B.u]}),r})();var ue=m(217),H=m(1486);let R=(()=>{var a;class r{constructor(){}exportExcel(t,o){const s={Sheets:{data:H.P6.json_to_sheet(t)},SheetNames:["data"]},d=H.cW(s,{bookType:"xlsx",type:"array"});this.saveExcel(d,o)}saveExcel(t,o){const n=new Blob([t],{type:"application/vnd.openxlmformats-officedocument.spreadsheetml.sheet; charset=UTF-8"});ue.saveAs(n,o+"_export_"+new Date+".xlsx")}}return(a=r).\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),r})();var Y=m(7988),fe=m(9177),F=m(4064);function he(a,r){if(1&a&&(e.TgZ(0,"th",41),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.titulosColumnas[i]," ")}}function be(a,r){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i.deparId.titulo," ")}}function Ze(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"td",48),e._UZ(2,"img",49),e.qZA(),e.BQk()),2&a){const i=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("src",t.url+"obtener_foto/"+i.foto,e.LSH)}}function ve(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",50),e._uU(2),e.qZA(),e.BQk()),2&a){const i=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",i.status," ")}}function Te(a,r){if(1&a&&e.YNc(0,ve,3,1,"ng-container",43),2&a){e.oxw();const i=e.MAs(6),t=e.oxw().$implicit;e.Q6J("ngIf","status"===t)("ngIfElse",i)}}function Ce(a,r){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const i=e.oxw(2).$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[t]," ")}}function xe(a,r){if(1&a&&e.YNc(0,Ce,2,1,"ng-container",43),2&a){e.oxw();const i=e.MAs(8),t=e.oxw().$implicit;e.Q6J("ngIf","acciones"!==t)("ngIfElse",i)}}function Ae(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.openEdit(o._id))}),e._UZ(1,"app-feather-icons",52),e.qZA(),e.TgZ(2,"button",53),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.Desactivar_Empleado(o._id))}),e.TgZ(3,"mat-icon",54),e._uU(4,"visibility_off"),e.qZA()(),e.TgZ(5,"button",55),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.eliminarEmpleado(o._id))}),e.TgZ(6,"mat-icon",56),e._uU(7,"delete"),e.qZA()()}2&a&&(e.xp6(1),e.Q6J("icon","edit"))}function Ee(a,r){if(1&a&&(e.TgZ(0,"td",42),e.YNc(1,be,2,1,"ng-container",43),e.YNc(2,Ze,3,1,"ng-container",44),e.YNc(3,Te,1,2,"ng-template",null,45,e.W1O),e.YNc(5,xe,1,2,"ng-template",null,46,e.W1O),e.YNc(7,Ae,8,1,"ng-template",null,47,e.W1O),e.qZA()),2&a){const i=e.MAs(4),t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","deparId"===t)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf","fotografia"===t)}}function qe(a,r){1&a&&(e.ynx(0,38),e.YNc(1,he,2,1,"th",39),e.YNc(2,Ee,9,3,"td",40),e.BQk()),2&a&&e.Q6J("matColumnDef",r.$implicit)}function Ue(a,r){1&a&&e._UZ(0,"tr",57)}function we(a,r){1&a&&e._UZ(0,"tr",58)}function ye(a,r){1&a&&(e.TgZ(0,"div",59)(1,"h4",60)(2,"span",61),e._uU(3,"No hay datos disponibles."),e.qZA()()())}function Se(a,r){1&a&&(e.TgZ(0,"div",59),e._UZ(1,"img",62),e.qZA())}function Me(a,r){1&a&&e._UZ(0,"mat-progress-bar",63)}const De=function(){return["Empleados"]},Ie=function(){return[5,10,25,100]};let Ne=(()=>{var a;class r{constructor(t,o,n,s){this.matDialog=t,this._authService=o,this._empleadoService=n,this._excelService=s,this.empleados=[],this.filtrado="",this.rowHeight=10,this.dataSource=new c.by(this.empleados),this.columnas=["No","nombre","apellido","fotografia","telefono","nit","deparId","status","acciones"],this.titulosColumnas={No:"No.",nombre:"Nombres",apellido:"Apellidos",fotografia:"Fotografia",telefono:"Telefono",nit:"NIT",deparId:"Departamento Trabajo",status:"Estado",acciones:"Acciones"},this.token=this._authService.getToken(),this.url=Q.a.url}ngOnInit(){this.obtener_datos()}openEdit(t){this.matDialog.open(pe,{data:{empleId:t}})}openDialog(){this.matDialog.open(ee,{})}openDialogDepa(){this.matDialog.open(te,{})}mostrarDepa(){this.matDialog.open(me,{})}obtener_datos(){this._empleadoService.listar_empleados(null,null,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"ACTIVO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.error("Error al obtener datos",t)})}filtro(){this.filtrado?(this._empleadoService.listar_empleados("nombre",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"ACTIVO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)}),this._empleadoService.listar_empleados("apellido",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"ACTIVO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)})):this.obtener_datos()}eliminarEmpleado(t){var n,o=this;g().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n eliminar\xe1 el Empleado. \xbfEst\xe1s seguro de que deseas continuar?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",confirmButtonColor:"#3a8f40",cancelButtonText:"Cancelar",cancelButtonColor:"#FF0000"}).then(function(s){return(n=n||(0,E.Z)(function*(d){if(d.isConfirmed)try{const x=yield o._empleadoService.eliminar_empleados(t,o.token).toPromise();console.log("Empleado eliminado con \xe9xito:",x),g().fire("Empleado eliminado","El Empleado ha sido eliminado con \xe9xito","success").then(()=>{location.reload()})}catch(x){g().fire("Error","El Empleado tiene un usuario Activo","error"),console.error("Error al eliminar el empleado:",x)}})).apply(this,arguments)})}exportExcel(){const o=this.empleados.filter(n=>"ACTIVO"===n.status).map(n=>({Nombre:n.nombre,Apellido:n.apellido,Telefono:n.telefono,Direccion:n.direccion,DPI_Empleado:n.dpi,NIT_Empleado:n.nit,Departamento_Trabajo:n.deparId.titulo,Salario_Base:n.salario_base}));this._excelService.exportExcel(o,"Listado_Empleados")}Desactivar_Empleado(t){console.log(t);try{this._empleadoService.desactivar_empleado(t,this.token).subscribe(o=>{console.log("Empleado desactivado correctamente:",o),g().fire("Empleado desactivado","El Empleado ha sido desactivado correctamente.","success").then(()=>{location.reload()})},o=>{console.error("Error al desactivar el Empleado:",o),g().fire("Error","Ha ocurrido un error al desactivar el Empleado.","error")})}catch(o){console.error("Error inesperado:",o),g().fire("Error","Ha ocurrido un error inesperado.","error")}}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(b.uw),e.Y36(p.e),e.Y36(h.i),e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-empleado"]],viewQuery:function(t,o){if(1&t&&(e.Gf(f.YE,5),e.Gf(A.NW,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.sort=n.first),e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:52,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],["mat-raised-button","","color","primary","mat-button","",2,"color","white",3,"matMenuTriggerFor"],["departamento","matMenu"],["mat-menu-item","",3,"click"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader",2,"background","#bfc9ca !important","border-radius","10px 10px 0px 0px"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["name","filtro","placeholder","Busqueda de Empleados","type","text","aria-label","Search box",1,"browser-default","search-field",2,"width","210px !important",3,"ngModel","keyup","ngModelChange"],["filter",""],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","Registrar Empleado",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","Exportar a Excel",1,"export-button","m-l-10",3,"click"],["src","assets/images/icons/xlsx.png","alt","Excel"],["matTooltip","Exportar en PDF",1,"export-button","m-l-10"],["src","assets/images/icons/pdf.png","alt","Excel"],[1,"body","overflow-auto"],[1,"body","table-responsive"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","justify-content: center; display: flex",4,"ngIf"],["mode","buffer",4,"ngIf"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],["Columnas",""],["otrasColumnas",""],["acciones",""],[1,"table-img","text-center"],["alt","Square image",3,"src"],[1,"badge","badge-solid-green"],["mat-icon-button","","matTooltip","Editar Empleado",3,"click"],[3,"icon"],["mat-icon-button","","matTooltip","Desactivar Empleado",3,"click"],[2,"color","#398f40"],["mat-icon-button","","matTooltip","Eliminar Empleado",3,"click"],[2,"color","red"],["mat-header-row",""],["mat-row",""],[2,"justify-content","center","display","flex"],[1,"m-b-15",2,"padding","15px"],[1,"label","label-default"],["src","../../assets/images/icons/vacio.png","alt","",2,"opacity","20%","width","20rem"],["mode","buffer"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",2)(5,"button",4),e._uU(6," Agregar Departamento de Trabajo "),e.qZA(),e.TgZ(7,"mat-menu",null,5)(9,"button",6),e.NdJ("click",function(){return o.openDialogDepa()}),e._uU(10," Nuevo Departamento "),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){return o.mostrarDepa()}),e._uU(12," Listado de Departamentos "),e.qZA()()(),e._UZ(13,"br"),e.TgZ(14,"div",7)(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"ul",12)(20,"li",13)(21,"h2"),e._uU(22,"Empleados"),e.qZA()(),e.TgZ(23,"li",14)(24,"label",15)(25,"i",16),e._uU(26,"search"),e.qZA()(),e.TgZ(27,"input",17,18),e.NdJ("keyup",function(){return o.filtro()})("ngModelChange",function(s){return o.filtrado=s}),e.qZA()()()(),e.TgZ(29,"div",19)(30,"ul",20)(31,"li",21)(32,"div",22)(33,"button",23),e.NdJ("click",function(){return o.openDialog()}),e.TgZ(34,"mat-icon",24),e._uU(35,"add"),e.qZA()()()(),e.TgZ(36,"li")(37,"div",25),e.NdJ("click",function(){return o.exportExcel()}),e._UZ(38,"img",26),e.qZA()(),e.TgZ(39,"li")(40,"div",27),e._UZ(41,"img",28),e.qZA()()()()(),e.TgZ(42,"div",29)(43,"div",30)(44,"table",31),e.YNc(45,qe,3,1,"ng-container",32),e.YNc(46,Ue,1,0,"tr",33),e.YNc(47,we,1,0,"tr",34),e.qZA(),e.YNc(48,ye,4,0,"div",35),e.YNc(49,Se,2,0,"div",35),e.YNc(50,Me,1,0,"mat-progress-bar",36),e._UZ(51,"mat-paginator",37),e.qZA()()()()()()()),2&t){const n=e.MAs(8);e.xp6(3),e.Q6J("title","Panel Administrativo de Empleados")("items",e.DdM(13,De))("active_item","Empleado"),e.xp6(2),e.Q6J("matMenuTriggerFor",n),e.xp6(22),e.Q6J("ngModel",o.filtrado),e.xp6(17),e.Q6J("dataSource",o.dataSource),e.xp6(1),e.Q6J("ngForOf",o.columnas),e.xp6(1),e.Q6J("matHeaderRowDef",o.columnas),e.xp6(1),e.Q6J("matRowDefColumns",o.columnas),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(14,Ie))}},dependencies:[v.sg,v.O5,l.Fj,l.JJ,l.On,Z.lW,Z.RK,Z.nh,q.Hw,Y.VK,Y.OP,Y.p6,A.NW,U.pW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,k.gM,fe.A,F.L]}),r})();function Je(a,r){if(1&a&&(e.TgZ(0,"th",36),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.titulosColumnas[i]," ")}}function ke(a,r){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i.deparId.titulo," ")}}function Qe(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"td",43),e._UZ(2,"img",44),e.qZA(),e.BQk()),2&a){const i=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("src",t.url+"obtener_foto/"+i.foto,e.LSH)}}function je(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",45),e._uU(2),e.qZA(),e.BQk()),2&a){const i=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",i.status," ")}}function Be(a,r){if(1&a&&e.YNc(0,je,3,1,"ng-container",38),2&a){e.oxw();const i=e.MAs(6),t=e.oxw().$implicit;e.Q6J("ngIf","status"===t)("ngIfElse",i)}}function Ye(a,r){if(1&a&&(e.ynx(0),e._uU(1),e.BQk()),2&a){const i=e.oxw(2).$implicit,t=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[t]," ")}}function Fe(a,r){if(1&a&&e.YNc(0,Ye,2,1,"ng-container",38),2&a){e.oxw();const i=e.MAs(8),t=e.oxw().$implicit;e.Q6J("ngIf","acciones"!==t)("ngIfElse",i)}}function Oe(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.Activar_Empleado(o._id))}),e.TgZ(1,"mat-icon",47),e._uU(2,"visibility"),e.qZA()()}}function He(a,r){if(1&a&&(e.TgZ(0,"td",37),e.YNc(1,ke,2,1,"ng-container",38),e.YNc(2,Qe,3,1,"ng-container",39),e.YNc(3,Be,1,2,"ng-template",null,40,e.W1O),e.YNc(5,Fe,1,2,"ng-template",null,41,e.W1O),e.YNc(7,Oe,3,0,"ng-template",null,42,e.W1O),e.qZA()),2&a){const i=e.MAs(4),t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","deparId"===t)("ngIfElse",i),e.xp6(1),e.Q6J("ngIf","fotografia"===t)}}function Re(a,r){1&a&&(e.ynx(0,33),e.YNc(1,Je,2,1,"th",34),e.YNc(2,He,9,3,"td",35),e.BQk()),2&a&&e.Q6J("matColumnDef",r.$implicit)}function Le(a,r){1&a&&e._UZ(0,"tr",48)}function Pe(a,r){1&a&&e._UZ(0,"tr",49)}function ze(a,r){1&a&&(e.TgZ(0,"div",50)(1,"h4",51)(2,"span",52),e._uU(3,"No hay datos disponibles."),e.qZA()()())}function Ge(a,r){1&a&&(e.TgZ(0,"div",50),e._UZ(1,"img",53),e.qZA())}function $e(a,r){1&a&&e._UZ(0,"mat-progress-bar",54)}const We=function(){return["Empleados"]},Ke=function(){return[5,10,25,100]};let Xe=(()=>{var a;class r{constructor(t,o,n){this._authService=t,this._empleadoService=o,this._excelService=n,this.empleados=[],this.filtrado="",this.rowHeight=10,this.dataSource=new c.by(this.empleados),this.columnas=["No","nombre","apellido","fotografia","telefono","nit","deparId","status","acciones"],this.titulosColumnas={No:"No.",nombre:"Nombres",apellido:"Apellidos",fotografia:"Fotografia",telefono:"Telefono",nit:"NIT",deparId:"Departamento Trabajo",status:"Estado",acciones:"Acciones"},this.token=this._authService.getToken(),this.url=Q.a.url}ngOnInit(){this.obtener_datos()}obtener_datos(){this._empleadoService.listar_empleados(null,null,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"DESABILITADO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.error("Error al obtener datos",t)})}filtro(){this.filtrado?(this._empleadoService.listar_empleados("nombre",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"DESABILITADO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)}),this._empleadoService.listar_empleados("apellido",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?(this.empleados=t.data.filter(o=>"DESABILITADO"===o.status),this.empleados=this.empleados.map((o,n)=>({...o,No:n+1})),this.dataSource=new c.by(this.empleados),this.dataSource.paginator=this.paginator):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)})):this.obtener_datos()}Activar_Empleado(t){console.log(t);try{this._empleadoService.activar_empleado(t,this.token).subscribe(o=>{console.log("Usuario activado correctamente:",o),g().fire("Usuario Activado","El usuario ha sido activado correctamente.","success").then(()=>{location.reload()})},o=>{console.error("Error al activar el usuario:",o),g().fire("Error","Ha ocurrido un error al activar el usuario.","error")})}catch(o){console.error("Error inesperado:",o),g().fire("Error","Ha ocurrido un error inesperado.","error")}}exportExcel(){const o=this.empleados.filter(n=>"DESABILITADO"===n.status).map(n=>({Nombre:n.nombre,Apellido:n.apellido,Telefono:n.telefono,Direccion:n.direccion,DPI_Empleado:n.dpi,NIT_Empleado:n.nit,Departamento_Trabajo:n.deparId.titulo,Salario_Base:n.salario_base}));this._excelService.exportExcel(o,"Listado_Empleados")}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(h.i),e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-empleado-desabilitado"]],viewQuery:function(t,o){if(1&t&&(e.Gf(f.YE,5),e.Gf(A.NW,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.sort=n.first),e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:39,vars:14,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader",2,"background","#bfc9ca !important","border-radius","10px 10px 0px 0px"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["name","filtro","placeholder","Busqueda de Empleados","type","text","aria-label","Search box",1,"browser-default","search-field",2,"width","210px !important",3,"ngModel","keyup","ngModelChange"],["filter",""],[1,"m-l-20"],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","Exportar a Excel",1,"export-button","m-l-10",3,"click"],["src","assets/images/icons/xlsx.png","alt","Excel"],["matTooltip","Exportar en PDF",1,"export-button","m-l-10"],["src","assets/images/icons/pdf.png","alt","Excel"],[1,"body","overflow-auto"],[1,"body","table-responsive"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","justify-content: center; display: flex",4,"ngIf"],["mode","buffer",4,"ngIf"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],[4,"ngIf"],["Columnas",""],["otrasColumnas",""],["acciones",""],[1,"table-img","text-center"],["alt","Square image",3,"src"],[1,"badge","badge-solid-red"],["mat-icon-button","","matTooltip","Activar Empleado",3,"click"],[2,"color","#398f40"],["mat-header-row",""],["mat-row",""],[2,"justify-content","center","display","flex"],[1,"m-b-15",2,"padding","15px"],[1,"label","label-default"],["src","../../assets/images/icons/vacio.png","alt","",2,"opacity","20%","width","20rem"],["mode","buffer"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),e._uU(12,"Empleados"),e.qZA()(),e.TgZ(13,"li",11)(14,"label",12)(15,"i",13),e._uU(16,"search"),e.qZA()(),e.TgZ(17,"input",14,15),e.NdJ("keyup",function(){return o.filtro()})("ngModelChange",function(s){return o.filtrado=s}),e.qZA()(),e._UZ(19,"li",16),e.qZA()(),e.TgZ(20,"div",17)(21,"ul",18),e._UZ(22,"li",19),e.TgZ(23,"li")(24,"div",20),e.NdJ("click",function(){return o.exportExcel()}),e._UZ(25,"img",21),e.qZA()(),e.TgZ(26,"li")(27,"div",22),e._UZ(28,"img",23),e.qZA()()()()(),e.TgZ(29,"div",24)(30,"div",25)(31,"table",26),e.YNc(32,Re,3,1,"ng-container",27),e.YNc(33,Le,1,0,"tr",28),e.YNc(34,Pe,1,0,"tr",29),e.qZA(),e.YNc(35,ze,4,0,"div",30),e.YNc(36,Ge,2,0,"div",30),e.YNc(37,$e,1,0,"mat-progress-bar",31),e._UZ(38,"mat-paginator",32),e.qZA()()()()()()),2&t&&(e.xp6(3),e.Q6J("title","Listado de Empleados Desactivados")("items",e.DdM(12,We))("active_item","Empleados Desactivados"),e.xp6(14),e.Q6J("ngModel",o.filtrado),e.xp6(14),e.Q6J("dataSource",o.dataSource),e.xp6(1),e.Q6J("ngForOf",o.columnas),e.xp6(1),e.Q6J("matHeaderRowDef",o.columnas),e.xp6(1),e.Q6J("matRowDefColumns",o.columnas),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",0===o.dataSource.data.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(13,Ke)))},dependencies:[v.sg,v.O5,l.Fj,l.JJ,l.On,Z.RK,q.Hw,A.NW,U.pW,f.YE,f.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,k.gM,F.L]}),r})();var L=m(8951);let Ve=(()=>{var a;class r{constructor(t,o,n,s){this._expedienteService=t,this._authService=o,this._empleadoService=n,this.data=s,this.expedientes={},this.archivos={},console.log("ID del empleado recibido:",this.data.empleId),this.token=this._authService.getToken()}ngOnInit(){this.id=this.data.empleId,this.obtenerEmpleadoId(this.id)}registro(t){t.valid?(this.expedientes.empleadoId=this.id,console.log(this.expedientes),console.log(this.archivos),this._expedienteService.registro_expediente(this.expedientes,this.archivos,this.token).subscribe(o=>{g().fire({title:"Se registro correctamente el expediente",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#3a8f40"}).then(n=>{n.isConfirmed&&location.reload()}),console.log(o)},o=>{g().fire("Error","El Empleado ya tiene un expediente","error"),console.log(o)})):g().fire({title:"No se han guardado los datos correctamente",icon:"error",cancelButtonText:"Cerrar",cancelButtonColor:"#e51212",showCancelButton:!0,showConfirmButton:!1})}onArchivoSeleccionado(t,o){const n=t.target.files[0];n&&(this.archivos[o]=n)}obtenerEmpleadoId(t){console.log("Obteniendo empleado por ID:",t),this._empleadoService.obtener_empleados(t,this.token).subscribe(o=>{o.data&&(this.nombreEmpleado=o.data.nombre,this.apellidoEmpleado=o.data.apellido)},o=>{console.error("Error al obtener el cupon:",o)})}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(L.B),e.Y36(p.e),e.Y36(h.i),e.Y36(b.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-papeleria-crear"]],decls:61,vars:5,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],[1,"badge-solid-green",2,"border-radius","15px"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mode","indeterminate","value","100"],["mat-dialog-content",""],[1,"register-form","m-4",3,"ngSubmit"],["registroForm","ngForm"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","required","","name","fecha_creacion",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["for","dpi"],[1,"fas","fa-address-card"],["type","file","name","dpi","id","dpi",3,"change"],["for","policiacos"],[1,"fas","fa-file-pdf"],["type","file","name","policiacos","id","policiacos",3,"change"],["for","penales"],["type","file","name","penales","id","penales",3,"change"],[1,"example-button-row"],["mat-raised-button","","color","primary",2,"color","white !important"],["mat-raised-button","","color","warn","tabindex","-1","matDialogClose",""]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6,"Registro de Expediente de "),e.TgZ(7,"span",5),e._uU(8),e.qZA()()()()(),e._uU(9," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(10,"button",6)(11,"mat-icon"),e._uU(12,"close"),e.qZA()()(),e._UZ(13,"mat-progress-bar",7),e.TgZ(14,"div",8)(15,"form",9,10),e.NdJ("ngSubmit",function(){e.CHM(n);const d=e.MAs(16);return e.KtG(o.registro(d))}),e.TgZ(17,"div",11)(18,"div",12)(19,"mat-form-field",13)(20,"mat-label"),e._uU(21,"Fecha de Creacion"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(d){return o.expedientes.fecha_creacion=d}),e.qZA(),e._UZ(23,"mat-datepicker-toggle",15)(24,"mat-datepicker",null,16),e.TgZ(26,"mat-error"),e._uU(27," La fecha es requerida"),e.qZA()()(),e._UZ(28,"hr"),e.qZA(),e.TgZ(29,"div",11)(30,"div",12)(31,"label",17),e._uU(32,"Documento de Identificacion unica DPI "),e._UZ(33,"i",18),e.qZA(),e.TgZ(34,"input",19),e.NdJ("change",function(d){return o.onArchivoSeleccionado(d,"dpi")}),e.qZA()(),e._UZ(35,"br")(36,"hr"),e.qZA(),e.TgZ(37,"div",11)(38,"div",12)(39,"label",20),e._uU(40,"Antecedentes Policiacos "),e._UZ(41,"i",21),e.qZA(),e.TgZ(42,"input",22),e.NdJ("change",function(d){return o.onArchivoSeleccionado(d,"policiacos")}),e.qZA()(),e._UZ(43,"br")(44,"hr"),e.qZA(),e.TgZ(45,"div",11)(46,"div",12)(47,"label",23),e._uU(48,"Antecedentes Penales "),e._UZ(49,"i",21),e.qZA(),e.TgZ(50,"input",24),e.NdJ("change",function(d){return o.onArchivoSeleccionado(d,"penales")}),e.qZA()(),e._UZ(51,"br")(52,"hr"),e.qZA(),e._UZ(53,"br"),e.TgZ(54,"div",11)(55,"div",12)(56,"div",25)(57,"button",26),e._uU(58,"Guardar"),e.qZA(),e.TgZ(59,"button",27),e._uU(60,"Cancelar"),e.qZA()()()()()()()}if(2&t){const n=e.MAs(25);e.xp6(8),e.AsE("",o.nombreEmpleado," ",o.apellidoEmpleado,""),e.xp6(14),e.Q6J("matDatepicker",n)("ngModel",o.expedientes.fecha_creacion),e.xp6(1),e.Q6J("for",n)}},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,Z.lW,Z.RK,C.Mq,C.hl,C.nW,b.ZT,b.xY,T.KE,T.hX,T.TO,T.R9,q.Hw,N.Nt,U.pW],styles:["label[for=dpi][_ngcontent-%COMP%], label[for=penales][_ngcontent-%COMP%], label[for=policiacos][_ngcontent-%COMP%]{display:block;margin-bottom:1em;font-size:1em;color:#000;opacity:.9;font-weight:500}input[type=file][_ngcontent-%COMP%]{cursor:pointer!important}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background:#1B1B1B;border:0;padding:1em 2em;cursor:pointer;color:#fff;border-radius:.5em}input[type=file][_ngcontent-%COMP%]::-ms-browse{background:#1B1B1B;border:0;padding:1em 2em;cursor:pointer;color:#fff;border-radius:.5em}"]}),r})();var et=m(8566),P=m(4104),z=m(2823),G=m(4777);function tt(a,r){1&a&&(e.TgZ(0,"li",18),e._uU(1,"No se encontraron empleados."),e.qZA())}function ot(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"li",22),e._UZ(1,"img",23),e.TgZ(2,"div",24)(3,"div",25),e._uU(4),e.qZA(),e.TgZ(5,"div",26)(6,"i",27),e._uU(7,"fiber_manual_record"),e.qZA(),e._uU(8),e.qZA()(),e.TgZ(9,"div",24),e._uU(10," \xa0\xa0\xa0\xa0"),e.TgZ(11,"span"),e._uU(12,"Opciones"),e.qZA(),e.TgZ(13,"button",28),e.NdJ("click",function(){const n=e.CHM(i).$implicit,s=e.oxw(2);return e.KtG(s.openExpediente(n._id))}),e.TgZ(14,"mat-icon"),e._uU(15,"file_upload"),e.qZA()(),e.TgZ(16,"button",29),e.NdJ("click",function(){const n=e.CHM(i).$implicit,s=e.oxw(2);return e.KtG(s.mostrarDetallesEmpleado(n._id))}),e.TgZ(17,"mat-icon"),e._uU(18,"content_paste"),e.qZA()()()()}if(2&a){const i=r.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("src",t.url+"obtener_foto/"+i.foto,e.LSH),e.xp6(3),e.AsE("",i.nombre," ",i.apellido," "),e.xp6(4),e.hij(" ",i.status," ")}}function at(a,r){if(1&a&&(e.TgZ(0,"div",19)(1,"ul",20),e.YNc(2,ot,19,4,"li",21),e.qZA()()),2&a){const i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.empleados)}}function nt(a,r){if(1&a){const i=e.EpF();e.TgZ(0,"div",30)(1,"div",6)(2,"div",31)(3,"div",32),e._UZ(4,"img",33),e.TgZ(5,"div",34)(6,"div",35),e._uU(7),e.qZA(),e.TgZ(8,"div",36),e._uU(9),e.qZA(),e.TgZ(10,"div",36),e._uU(11),e.qZA()()(),e.TgZ(12,"mat-tab-group",37),e.NdJ("selectedIndexChange",function(o){e.CHM(i);const n=e.oxw();return e.KtG(n.selectedTabIndex=o)}),e.TgZ(13,"mat-tab",38),e._UZ(14,"pdf-viewer",39),e.qZA(),e.TgZ(15,"mat-tab",40),e._UZ(16,"pdf-viewer",39),e.qZA(),e.TgZ(17,"mat-tab",41),e._UZ(18,"pdf-viewer",39),e.qZA()(),e.TgZ(19,"div",42)(20,"div",43)(21,"a",44)(22,"button",45)(23,"i",46),e._uU(24,"local_printshop"),e.qZA()()(),e.TgZ(25,"a",44)(26,"button",47)(27,"i",46),e._uU(28,"local_printshop"),e.qZA()()(),e.TgZ(29,"a",44)(30,"button",48)(31,"i",46),e._uU(32,"local_printshop"),e.qZA()()(),e.TgZ(33,"button",49),e.NdJ("click",function(){const n=e.CHM(i).$implicit,s=e.oxw();return e.KtG(s.editarExpediente(n.empleadoId._id,n._id))}),e.TgZ(34,"i",46),e._uU(35,"create"),e.qZA()()()()()()()}if(2&a){const i=r.$implicit,t=e.oxw();e.xp6(4),e.Q6J("src",t.url+"obtener_foto/"+i.empleadoId.foto,e.LSH),e.xp6(3),e.AsE("",i.empleadoId.nombre," ",i.empleadoId.apellido,""),e.xp6(2),e.hij("Nit :",i.empleadoId.nit,""),e.xp6(2),e.hij("Dpi: ",i.empleadoId.dpi,""),e.xp6(1),e.Q6J("selectedIndex",t.selectedTabIndex),e.xp6(2),e.Q6J("src",t.url+"obtener_pdf/"+i.dpi)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!0)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1),e.xp6(2),e.Q6J("src",t.url+"obtener_pdf/"+i.penales)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!0)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1),e.xp6(2),e.Q6J("src",t.url+"obtener_pdf/"+i.policiacos)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!0)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1),e.xp6(3),e.uIk("href",t.url+"obtener_pdf/"+i.dpi,e.LSH),e.xp6(1),e.Q6J("hidden",0!==t.selectedTabIndex),e.xp6(3),e.uIk("href",t.url+"obtener_pdf/"+i.penales,e.LSH),e.xp6(1),e.Q6J("hidden",1!==t.selectedTabIndex),e.xp6(3),e.uIk("href",t.url+"obtener_pdf/"+i.policiacos,e.LSH),e.xp6(1),e.Q6J("hidden",2!==t.selectedTabIndex)}}function it(a,r){1&a&&(e.TgZ(0,"div",30),e._UZ(1,"img",50),e.qZA())}const rt=function(){return["Empleados"]},lt=[{path:"",redirectTo:"empleado",pathMatch:"full"},{path:"empleado",component:Ne},{path:"empleado_desabilitado",component:Xe},{path:"expediente",component:(()=>{var a;class r{addTab(t){this.tabs.push("New"),t&&this.selected.setValue(this.tabs.length-1)}removeTab(t){this.tabs.splice(t,1)}constructor(t,o,n,s){this._authService=t,this._empleadoService=o,this.matDialog=n,this._expedienteService=s,this.empleados=[],this.filtrado="",this.mostrarImagen=!0,this.tabs=["Dpi","Antecedentes Penales","Antecedentes Policiacos"],this.selectedTabIndex=0,this.selected=new l.p4(0),this.mostrarDetallesEmpleado=d=>{console.log(d),this.empleadoSeleccionado=d,this._expedienteService.listar_expediente(this.empleadoSeleccionado,this.token).subscribe(x=>{this.expediente=x,console.log(x),console.log(this.expediente),this.mostrarImagen=!1},x=>{console.error("Error al obtener datos",x)})},this.token=this._authService.getToken(),this.url=Q.a.url}ngOnInit(){this.obtener_datos()}obtener_datos(){this._empleadoService.listar_empleados(null,null,this.token).subscribe(t=>{Array.isArray(t.data)?this.empleados=t.data.filter(o=>"ACTIVO"===o.status):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.error("Error al obtener datos",t)})}filtro(){this.filtrado?(this._empleadoService.listar_empleados("nombre",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?this.empleados=t.data.filter(o=>"ACTIVO"===o.status):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)}),this._empleadoService.listar_empleados("apellido",this.filtrado,this.token).subscribe(t=>{Array.isArray(t.data)?this.empleados=t.data.filter(o=>"ACTIVO"===o.status):console.error("La propiedad data en la respuesta del servidor no es un array:",t)},t=>{console.log(t)})):this.obtener_datos()}openExpediente(t){this.matDialog.open(Ve,{data:{empleId:t}})}editarExpediente(t,o){this.matDialog.open(et.q,{data:{empleadoId:t,expeId:o}})}}return(a=r).\u0275fac=function(t){return new(t||a)(e.Y36(p.e),e.Y36(h.i),e.Y36(b.uw),e.Y36(L.B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-papeleria-empleado"]],decls:20,vars:9,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-4","col-lg-4"],[1,"card"],[1,"body"],["id","plist",1,"people-list"],[1,"form-line","m-b-15"],["name","filtro","type","text","placeholder","Buscar Empleado......",1,"form-control",3,"ngModel","keyup","ngModelChange"],["value","100",2,"background","black !important"],[1,"tab-content"],[2,"height","690px"],["noData",""],["id","chat_user",4,"ngIf","ngIfElse"],["class","col-xs-12 col-sm-12 col-md-8 col-lg-8",4,"ngFor","ngForOf"],["class","col-xs-12 col-sm-12 col-md-8 col-lg-8",4,"ngIf"],[1,"no-data-message"],["id","chat_user"],[1,"chat-list","list-unstyled","m-b-0"],["class","clearfix",4,"ngFor","ngForOf"],[1,"clearfix"],["alt","avatar",2,"height","40px","width","40px",3,"src"],[1,"about"],[1,"name"],[1,"status"],[1,"material-icons","online"],["mat-icon-button","","matTooltip","Crear Expediente",3,"click"],["mat-icon-button","","matTooltip","Ver Expediente",3,"click"],[1,"col-xs-12","col-sm-12","col-md-8","col-lg-8"],[1,"chat"],[1,"chat-header","clearfix"],["alt","avatar",2,"height","70px","width","70px","border-radius","0 0 0 0","padding","10px 0 0 10px",3,"src"],[1,"chat-about"],[1,"chat-with"],[1,"chat-num-messages"],[3,"selectedIndex","selectedIndexChange"],["label","Dpi"],[2,"width","100%","height","500px",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],["label","Antecedentes Penales"],["label","Antecedentes Policiacos"],[1,"chat-message","clearfix"],[1,"chat-upload"],["target","_blank"],["mat-mini-fab","","matTooltip","Imprimir Dpi",1,"bg-green","msr-2",3,"hidden"],[1,"material-icons"],["mat-mini-fab","","matTooltip","Imprimir Antecedentes Penales",1,"bg-green","msr-2",3,"hidden"],["mat-mini-fab","","matTooltip","Imprimir Antecedentes Policiacos",1,"bg-green","msr-2",3,"hidden"],["mat-mini-fab","","matTooltip","Editar Expediente",1,"bg-black",3,"click"],["src","../../../assets/images/banner/expediente.svg","alt","expdiente",2,"height","780px","width","100%"]],template:function(t,o){if(1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-breadcrumb",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10),e.NdJ("keyup",function(){return o.filtro()})("ngModelChange",function(s){return o.filtrado=s}),e.qZA(),e._UZ(11,"br")(12,"mat-progress-bar",11),e.qZA(),e.TgZ(13,"div",12)(14,"ng-scrollbar",13),e.YNc(15,tt,2,0,"ng-template",null,14,e.W1O),e.YNc(17,at,3,1,"div",15),e.qZA()()()()()(),e.YNc(18,nt,36,48,"div",16),e.YNc(19,it,2,0,"div",17),e.qZA()()()),2&t){const n=e.MAs(16);e.xp6(3),e.Q6J("title","Panel Administrativo de Expedientes")("items",e.DdM(8,rt))("active_item","Expedientes de Empleados"),e.xp6(7),e.Q6J("ngModel",o.filtrado),e.xp6(7),e.Q6J("ngIf",o.empleados&&o.empleados.length>0)("ngIfElse",n),e.xp6(1),e.Q6J("ngForOf",o.expediente),e.xp6(1),e.Q6J("ngIf",o.mostrarImagen)}},dependencies:[v.sg,v.O5,l.Fj,l.JJ,l.On,Z.RK,Z.nh,q.Hw,U.pW,P.uX,P.SP,k.gM,F.L,z.KC,G.rQ]}),r})()}];let st=(()=>{var a;class r{}return(a=r).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[M.Bz.forChild(lt),M.Bz]}),r})();var dt=m(1858);let mt=(()=>{var a;class r{}return(a=r).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[v.ez,st,S.m,dt.K,B.d,z.kb,G.xC]}),r})()},217:function(j,D){var m,S;void 0!==(S="function"==typeof(m=function(){"use strict";function E(u,_,e){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){g(p.response,_,e)},p.onerror=function(){console.error("could not download file")},p.send()}function c(u){var _=new XMLHttpRequest;_.open("HEAD",u,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function A(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(_)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,I=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!I?function(u,_,e){var p=f.URL||f.webkitURL,h=document.createElement("a");h.download=_=_||u.name||"download",h.rel="noopener","string"==typeof u?(h.href=u,h.origin===location.origin?A(h):c(h.href)?E(u,_,e):A(h,h.target="_blank")):(h.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(h.href)},4e4),setTimeout(function(){A(h)},0))}:"msSaveOrOpenBlob"in navigator?function(u,_,e){if(_=_||u.name||"download","string"!=typeof u)navigator.msSaveOrOpenBlob(function M(u,_){return typeof _>"u"?_={autoBom:!1}:"object"!=typeof _&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\ufeff",u],{type:u.type}):u}(u,e),_);else if(c(u))E(u,_,e);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){A(p)})}}:function(u,_,e,p){if((p=p||open("","_blank"))&&(p.document.title=p.document.body.innerText="downloading..."),"string"==typeof u)return E(u,_,e);var h="application/octet-stream"===u.type,w=/constructor/i.test(f.HTMLElement)||f.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||h&&w||I)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=l?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=b:location=b,p=null},y.readAsDataURL(u)}else{var Z=f.URL||f.webkitURL,C=Z.createObjectURL(u);p?p.location=C:location.href=C,p=null,setTimeout(function(){Z.revokeObjectURL(C)},4e4)}});f.saveAs=g.saveAs=g,j.exports=g})?m.apply(D,[]):m)&&(j.exports=S)}}]);