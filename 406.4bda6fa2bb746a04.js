"use strict";(self.webpackChunkspire=self.webpackChunkspire||[]).push([[406],{1286:(I,C,s)=>{s.d(C,{i:()=>x});var c=s(5074),v=s(9862),T=s(5879);let x=(()=>{var f;class t{constructor(l){this._http=l,this.url=c.a.url}registro_empleado(l,d,_){let Z=new v.WM({Authorization:_});const p=new FormData;return p.append("nombre",l.nombre),p.append("apellido",l.apellido),p.append("telefono",l.telefono),p.append("direccion",l.direccion),p.append("civil",l.civil),p.append("tiene_hijos",l.tiene_hijos),p.append("pareja",l.pareja),p.append("num_hijos",l.num_hijos),p.append("nom_hijos",l.nom_hijos),p.append("nit",l.nit),p.append("dpi",l.dpi),p.append("fecha_contra",l.fecha_contra),p.append("salario_base",l.salario_base),p.append("deparId",l.deparId),p.append("foto",d),this._http.post(this.url+"registro_empleado",p,{headers:Z})}listar_empleados(l,d,_){let Z=new v.WM({"Content-Type":"application/json",Authorization:_});return this._http.get(this.url+"listar_empleados/"+l+"/"+d,{headers:Z})}eliminar_empleados(l,d){let _=new v.WM({"Content-Type":"application/json",Authorization:d});return this._http.delete(this.url+"eliminar_empleado/"+l,{headers:_})}obtener_empleados(l,d){let _=new v.WM({"Content-Type":"application/json",Authorization:d});return this._http.get(this.url+"obtener_empleado/"+l,{headers:_})}obtener_empleadoss(l,d){let _=new v.WM({"Content-Type":"application/json",Authorization:d});return this._http.get(this.url+"obtener_empleados/"+l,{headers:_})}actualizar_empleado(l,d,_,Z){let p=new v.WM({Authorization:Z});const h=new FormData;return h.append("nombre",d.nombre),h.append("apellido",d.apellido),h.append("telefono",d.telefono),h.append("direccion",d.direccion),h.append("civil",d.civil),h.append("tiene_hijos",d.tiene_hijos),h.append("pareja",d.pareja),h.append("num_hijos",d.num_hijos),h.append("nom_hijos",d.nom_hijos),h.append("nit",d.nit),h.append("dpi",d.dpi),h.append("fecha_contra",d.fecha_contra),h.append("salario_base",d.salario_base),h.append("deparId",d.deparId),h.append("foto",_),this._http.put(this.url+"actualizar_empleado/"+l,h,{headers:p})}desactivar_empleado(l,d){let _=new v.WM({"Content-Type":"application/json",Authorization:d});return this._http.post(this.url+"desactivar_empleado/"+l,{},{headers:_})}activar_empleado(l,d){let _=new v.WM({"Content-Type":"application/json",Authorization:d});return this._http.post(this.url+"activar_empleado/"+l,{},{headers:_})}}return(f=t).\u0275fac=function(l){return new(l||f)(T.LFG(v.eN))},f.\u0275prov=T.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),t})()},4064:(I,C,s)=>{s.d(C,{L:()=>t});var c=s(5879),v=s(6814),T=s(2787),x=s(9177);function f(b,l){if(1&b&&(c.TgZ(0,"li",11),c._uU(1),c.qZA()),2&b){const d=l.$implicit;c.xp6(1),c.Oqu(d)}}let t=(()=>{var b;class l{constructor(){}}return(b=l).\u0275fac=function(_){return new(_||b)},b.\u0275cmp=c.Xpm({type:b,selectors:[["app-breadcrumb"]],inputs:{title:"title",items:"items",active_item:"active_item"},decls:14,vars:7,consts:[[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"page-title"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[3,"routerLink"],[3,"icon"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"]],template:function(_,Z){1&_&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),c._uU(5),c.qZA()()(),c.TgZ(6,"div",2)(7,"ul",5)(8,"li",6)(9,"a",7),c._UZ(10,"app-feather-icons",8),c.qZA()(),c.YNc(11,f,2,1,"li",9),c.TgZ(12,"li",10),c._uU(13),c.qZA()()()()()),2&_&&(c.xp6(5),c.Oqu(Z.title),c.xp6(4),c.Q6J("routerLink","/dashboard"),c.xp6(1),c.Tol("breadcrumb-icon"),c.Q6J("icon","home"),c.xp6(1),c.Q6J("ngForOf",Z.items),c.xp6(2),c.Oqu(Z.active_item))},dependencies:[v.sg,T.rH,x.A]}),l})()},7406:(I,C,s)=>{s.r(C),s.d(C,{VentasModule:()=>Zt});var c=s(6814),v=s(4622),T=s(2787),x=s(3519),f=s.n(x),t=s(5879),b=s(5074),l=s(9862);let d=(()=>{var a;class r{constructor(n){this._http=n,this.url=b.a.url}registro_venta(n,e){let o=new l.WM({"Content-Type":"application/json",Authorization:e});return this._http.post(this.url+"venta_empleado",n,{headers:o})}listar_venta(n,e,o){let m=new l.WM({"Content-Type":"application/json",Authorization:o}),g=new l.LE;return e&&(g=g.set("cliente",e)),this._http.get(this.url+"ventas_empleado/"+n,{headers:m,params:g})}obtener_venta(n,e){let o=new l.WM({"Content-Type":"application/json",Authorization:e});return this._http.get(this.url+"obtener_venta/"+n,{headers:o})}eliminar_venta(n,e){let o=new l.WM({"Content-Type":"application/json",Authorization:e});return this._http.delete(this.url+"eliminar_venta/"+n,{headers:o})}listar_ventas(n,e,o){let m=new l.WM({"Content-Type":"application/json",Authorization:n}),g=(new l.LE).set("fechaInicio",e).set("fechaFin",o);return this._http.get(this.url+"listar_ventas",{headers:m,params:g})}}return(a=r).\u0275fac=function(n){return new(n||a)(t.LFG(l.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),r})();var _=s(2922),Z=s(2939),p=s(6223),h=s(2296),y=s(8034),D=s(4170),U=s(617),F=s(2032),w=s(4064);function Q(a,r){if(1&a){const i=t.EpF();t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4),t.qZA(),t.TgZ(5,"td",30),t._uU(6),t.qZA(),t.TgZ(7,"td",30),t._uU(8),t.qZA(),t.TgZ(9,"td",30)(10,"button",34),t.NdJ("click",function(){const o=t.CHM(i).index,m=t.oxw();return t.KtG(m.eliminarProducto(o))}),t._uU(11,"Eliminar"),t.qZA()()()}if(2&a){const i=r.$implicit;t.xp6(2),t.Oqu(i.cantidad),t.xp6(2),t.Oqu(i.descripcion),t.xp6(2),t.hij("Q ",i.precioUnitario,""),t.xp6(2),t.hij("Q ",i.subtotal,"")}}const q=function(){return["Ventas"]};let O=(()=>{var a;class r{constructor(n,e,o){this._ventaService=n,this._authService=e,this.snackBar=o,this.productos=[],this.total=0,this.token=this._authService.getToken(),this.fecha_venta=new Date}puedesAgregarProducto(){return!!this.cantidad&&!!this.descripcion&&!!this.precioUnitario}agregarProducto(){const n=this.cantidad*this.precioUnitario,e={cantidad:this.cantidad,descripcion:this.descripcion,precioUnitario:this.precioUnitario,subtotal:n,total:this.total+=n};this.productos.push(e),this.cantidad=null,this.descripcion="",this.precioUnitario=null}eliminarProducto(n){this.total-=this.productos[n].subtotal,this.productos.splice(n,1)}registrarVenta(n){n.valid?this._ventaService.registro_venta({productos:this.productos,numero_venta:this.numero_venta,cliente:this.cliente,subtotal:this.total,total:this.total,fecha_venta:this.fecha_venta,nombre_emple:this.nombre_emple},this.token).subscribe(o=>{console.log("Venta registrada correctamente:",o),this.productos=[],this.cliente="",this.numero_venta="",this.total=0,f().fire("Venta","la venta fue realizada con exito","success")},o=>{console.error("Error al registrar la venta:",o),f().fire("Error","Hubo un error al registra la venta","error")}):f().fire("Error","Por favor, complete todos los campos requeridos","error")}showNotification(n,e,o,m){this.snackBar.open(e,"",{duration:2e3,verticalPosition:o,horizontalPosition:m,panelClass:n})}}return(a=r).\u0275fac=function(n){return new(n||a)(t.Y36(d),t.Y36(_.e),t.Y36(Z.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ventas"]],decls:85,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row","clearfix"],[1,"row"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12"],[1,"card"],[1,"header",2,"background-color","#252525","border-radius","5px 5px 0 0"],[2,"color","#ffff"],[1,"body"],[1,"register-form","m-4",3,"ngSubmit"],["ventaForm","ngForm"],[1,"col-xl-4","col-lg-6","col-md-12","col-sm-12","mb-2"],["appearance","fill",1,"example-full-width"],["matInput","","required","","name","fecha_venta",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"col-xl-4","col-lg-6","col-md-12","col-sm-12","mb-3"],["matInput","","type","text","required","","name","cliente",3,"ngModel","ngModelChange"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],["matInput","","type","text","required","","name","numero_venta",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-lg-6","col-md-12","col-sm-12","mb-2"],["matInput","","type","number","name","cantidad",3,"ngModel","ngModelChange"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-2"],["matInput","","type","text","name","descripcion",3,"ngModel","ngModelChange"],["matInput","","type","number","name","precioUnitario",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-lg-8","col-md-12","col-sm-12","mb-2"],["mat-raised-button","","color","primary","type","button",2,"color","white",3,"disabled","click"],[1,"table","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],[2,"text-align","right"],["mat-raised-button","","color","primary","type","submit",2,"color","white"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h2",9),t._uU(10,"Registro de venta"),t.qZA()(),t.TgZ(11,"div",10)(12,"form",11,12),t.NdJ("ngSubmit",function(){t.CHM(o);const g=t.MAs(13);return t.KtG(e.registrarVenta(g))}),t.TgZ(14,"div",5)(15,"div",13)(16,"mat-form-field",14)(17,"mat-label"),t._uU(18,"Fecha de venta"),t.qZA(),t.TgZ(19,"input",15),t.NdJ("ngModelChange",function(g){return e.fecha_venta=g}),t.qZA(),t._UZ(20,"mat-datepicker-toggle",16)(21,"mat-datepicker",null,17),t.qZA()(),t.TgZ(23,"div",18)(24,"mat-form-field",14)(25,"mat-label"),t._uU(26,"Nombre del Cliente"),t.qZA(),t.TgZ(27,"input",19),t.NdJ("ngModelChange",function(g){return e.cliente=g}),t.qZA(),t.TgZ(28,"mat-icon",20),t._uU(29,"face"),t.qZA()()(),t.TgZ(30,"div",13)(31,"mat-form-field",14)(32,"mat-label"),t._uU(33,"Codigo Venta"),t.qZA(),t.TgZ(34,"input",21),t.NdJ("ngModelChange",function(g){return e.numero_venta=g}),t.qZA(),t.TgZ(35,"mat-icon",20),t._uU(36,"add_box"),t.qZA()()()(),t.TgZ(37,"div",5)(38,"div",22)(39,"mat-form-field",14)(40,"mat-label"),t._uU(41,"Cantidad"),t.qZA(),t.TgZ(42,"input",23),t.NdJ("ngModelChange",function(g){return e.cantidad=g}),t.qZA(),t.TgZ(43,"mat-icon",20),t._uU(44,"add_box"),t.qZA()()(),t.TgZ(45,"div",24)(46,"mat-form-field",14)(47,"mat-label"),t._uU(48,"Descripcion"),t.qZA(),t.TgZ(49,"input",25),t.NdJ("ngModelChange",function(g){return e.descripcion=g}),t.qZA(),t.TgZ(50,"mat-icon",20),t._uU(51,"format_align_justify"),t.qZA()()(),t.TgZ(52,"div",22)(53,"mat-form-field",14)(54,"mat-label"),t._uU(55,"Precio Unitario"),t.qZA(),t.TgZ(56,"input",26),t.NdJ("ngModelChange",function(g){return e.precioUnitario=g}),t.qZA()()(),t.TgZ(57,"div",27)(58,"button",28),t.NdJ("click",function(){return e.agregarProducto(),e.showNotification("snackbar-success","Producto Agregado...!!!","top","right")}),t._uU(59,"Agregar Producto"),t.qZA()()(),t.TgZ(60,"div",5)(61,"h2"),t._uU(62,"Productos Agregados:"),t.qZA(),t.TgZ(63,"table",29)(64,"thead")(65,"tr")(66,"th",30),t._uU(67,"Cantidad"),t.qZA(),t.TgZ(68,"th",30),t._uU(69,"Descripci\xf3n"),t.qZA(),t.TgZ(70,"th",30),t._uU(71,"Precio Unitario"),t.qZA(),t.TgZ(72,"th",30),t._uU(73,"Sub Total"),t.qZA(),t.TgZ(74,"th",30),t._uU(75,"Acciones"),t.qZA()()(),t.TgZ(76,"tbody"),t.YNc(77,Q,12,4,"tr",31),t.qZA()(),t.TgZ(78,"h6",32),t._uU(79),t.qZA()(),t._UZ(80,"br")(81,"br"),t.TgZ(82,"div",5)(83,"button",33),t._uU(84,"Registrar Venta"),t.qZA()()()()()()()()()()}if(2&n){const o=t.MAs(22);t.xp6(3),t.Q6J("title","Panel de Ventas")("items",t.DdM(14,q))("active_item","Ventas del Dia"),t.xp6(16),t.Q6J("matDatepicker",o)("ngModel",e.fecha_venta),t.xp6(1),t.Q6J("for",o),t.xp6(7),t.Q6J("ngModel",e.cliente),t.xp6(7),t.Q6J("ngModel",e.numero_venta),t.xp6(8),t.Q6J("ngModel",e.cantidad),t.xp6(7),t.Q6J("ngModel",e.descripcion),t.xp6(7),t.Q6J("ngModel",e.precioUnitario),t.xp6(2),t.Q6J("disabled",!e.puedesAgregarProducto()),t.xp6(19),t.Q6J("ngForOf",e.productos),t.xp6(2),t.hij("Total: Q ",e.total,"")}},dependencies:[c.sg,p._Y,p.Fj,p.wV,p.JJ,p.JL,p.Q7,p.On,p.F,h.lW,y.Mq,y.hl,y.nW,D.KE,D.hX,D.R9,U.Hw,F.Nt,w.L]}),r})();var j=s(5861),u=s(5313),V=s(1476),A=s(3566),M=s(9347),H=s(4414),Y=s(1286),E=s(6007);function k(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",10),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t._uU(4),t.qZA(),t.TgZ(5,"td",10),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t._uU(8),t.qZA()()),2&a){const i=r.$implicit;t.xp6(2),t.Oqu(i.cantidad),t.xp6(2),t.Oqu(i.descripcion),t.xp6(2),t.hij("Q ",i.precioUnitario,""),t.xp6(2),t.hij("Q ",i.subtotal,"")}}let N=(()=>{var a;class r{constructor(n,e,o,m,g){this._authService=n,this._ventaService=e,this.data=o,this._usuarioService=m,this._empleadoService=g,this.ventas={},this.usuarios={},this.empleado={},console.log("ID del empleado recibido:",this.data.ventaId),console.log("ID del empleado recibido:",this.data.usuarioId),this.token=this._authService.getToken()}ngOnInit(){this.id=this.data.ventaId,this.idd=this.data.usuarioId,this.obtenerVentaId(this.id),this.obtenerUsuarioPorId(this.idd)}obtenerVentaId(n){console.log("Obteniendo venta por ID:",n),this._ventaService.obtener_venta(n,this.token).subscribe(e=>{e.data&&(this.ventas=e.data,console.log(e))},e=>{console.error("Error al obtener el cupon:",e)})}obtenerUsuarioPorId(n){this._usuarioService.obtener_usuarios(n,this.token).subscribe(e=>{if(e.data&&e.data.empleadoId._id){this.usuarios=e.data;const o=e.data.empleadoId._id;console.log("id empleado",o),console.log(e),this._empleadoService.obtener_empleadoss(o,this.token).subscribe(m=>{console.log(m),m.data&&(this.empleado=m.data)},m=>{console.error("Error al obtener el empleado:",m)})}},e=>{console.error("Error al obtener el usuario:",e)})}}return(a=r).\u0275fac=function(n){return new(n||a)(t.Y36(_.e),t.Y36(d),t.Y36(M.WI),t.Y36(H.i),t.Y36(Y.i))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-detalle-venta"]],decls:37,vars:4,consts:[[1,"addContainer"],[1,"modalHeader"],[1,"editRowModal"],[1,"modalHeader","clearfix"],[1,"modal-about"],["mat-icon-button","","matDialogClose","","aria-label","Close dialog",1,"modal-close-button"],["mode","indeterminate","value","100"],["mat-dialog-content",""],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"example-button-row"],["mat-raised-button","","color","warn","tabindex","-1","matDialogClose",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),t._uU(6,"Detalle de Venta"),t.qZA()()()(),t._uU(7," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.TgZ(8,"button",5)(9,"mat-icon"),t._uU(10,"close"),t.qZA()()(),t._UZ(11,"mat-progress-bar",6),t.TgZ(12,"div",7)(13,"h5"),t._uU(14),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"div",8)(17,"table",9)(18,"thead")(19,"tr")(20,"th",10),t._uU(21,"Cantidad"),t.qZA(),t.TgZ(22,"th",10),t._uU(23,"Descripcion"),t.qZA(),t.TgZ(24,"th",10),t._uU(25,"Precio Unitario"),t.qZA(),t.TgZ(26,"th",10),t._uU(27,"Sub total"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,k,9,4,"tr",11),t.qZA()(),t.TgZ(30,"h6",12),t._uU(31),t.qZA()(),t.TgZ(32,"div",13)(33,"div",14)(34,"div",15)(35,"button",16),t._uU(36,"Cerrar"),t.qZA()()()()()()),2&n&&(t.xp6(14),t.AsE("Venta Realizar por: ",e.empleado.nombre," ",e.empleado.apellido,""),t.xp6(15),t.Q6J("ngForOf",e.ventas.productos),t.xp6(2),t.hij("TOTAL: Q ",e.ventas.total,""))},dependencies:[c.sg,h.lW,h.RK,M.ZT,M.xY,U.Hw,E.pW]}),r})();var J=s(2596);function P(a,r){if(1&a&&(t.TgZ(0,"th",28),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.titulosColumnas[i]," ")}}function B(a,r){if(1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&a){const i=t.oxw().$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ","fecha_venta"===n?t.xi3(2,1,i[n],"dd/MM/yyyy"):i[n]," ")}}function W(a,r){if(1&a){const i=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.Detalle(e._id,e.usuarioId._id))}),t.TgZ(1,"mat-icon",33),t._uU(2,"info_outline"),t.qZA()(),t.TgZ(3,"button",34),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.eliminarEmpleado(e._id))}),t.TgZ(4,"mat-icon",35),t._uU(5,"delete"),t.qZA()()}}function z(a,r){if(1&a&&(t.TgZ(0,"td",29),t.YNc(1,B,3,4,"ng-container",30),t.YNc(2,W,6,0,"ng-template",null,31,t.W1O),t.qZA()),2&a){const i=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","acciones"!==n)("ngIfElse",i)}}function R(a,r){1&a&&(t.ynx(0,25),t.YNc(1,P,2,1,"th",26),t.YNc(2,z,4,2,"td",27),t.BQk()),2&a&&t.Q6J("matColumnDef",r.$implicit)}function L(a,r){1&a&&t._UZ(0,"tr",36)}function G(a,r){1&a&&t._UZ(0,"tr",37)}function $(a,r){1&a&&(t.TgZ(0,"div",38)(1,"h4",39)(2,"span",40),t._uU(3,"No hay datos disponibles."),t.qZA()()())}function K(a,r){1&a&&(t.TgZ(0,"div",38),t._UZ(1,"img",41),t.qZA())}function X(a,r){1&a&&t._UZ(0,"mat-progress-bar",42)}const tt=function(){return["Ventas"]},et=function(){return[5,10,25,100]};function at(a,r){if(1&a&&(t.TgZ(0,"th",34),t._uU(1),t.qZA()),2&a){const i=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.titulosColumnas[i]," ")}}function ot(a,r){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const i=t.oxw().$implicit;t.xp6(1),t.hij(" ",i.usuarioId.correo," ")}}function it(a,r){if(1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&a){const i=t.oxw(2).$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ","fecha_venta"===n?t.xi3(2,1,i[n],"dd/MM/yyyy"):i[n]," ")}}function rt(a,r){if(1&a&&t.YNc(0,it,3,4,"ng-container",36),2&a){t.oxw();const i=t.MAs(5),n=t.oxw().$implicit;t.Q6J("ngIf","acciones"!==n&&"usuarioId"!==n)("ngIfElse",i)}}function lt(a,r){if(1&a){const i=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.Detalle(e._id,e.usuarioId._id))}),t.TgZ(1,"mat-icon",40),t._uU(2,"info_outline"),t.qZA()()}}function st(a,r){if(1&a&&(t.TgZ(0,"td",35),t.YNc(1,ot,2,1,"ng-container",36),t.YNc(2,rt,1,2,"ng-template",null,37,t.W1O),t.YNc(4,lt,3,0,"ng-template",null,38,t.W1O),t.qZA()),2&a){const i=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","usuarioId"===n)("ngIfElse",i)}}function ct(a,r){1&a&&(t.ynx(0,31),t.YNc(1,at,2,1,"th",32),t.YNc(2,st,6,2,"td",33),t.BQk()),2&a&&t.Q6J("matColumnDef",r.$implicit)}function dt(a,r){1&a&&t._UZ(0,"tr",41)}function pt(a,r){1&a&&t._UZ(0,"tr",42)}function mt(a,r){1&a&&(t.TgZ(0,"div",43)(1,"h4",44)(2,"span",45),t._uU(3,"No hay datos disponibles."),t.qZA()()())}function ut(a,r){1&a&&(t.TgZ(0,"div",43),t._UZ(1,"img",46),t.qZA())}function _t(a,r){1&a&&t._UZ(0,"mat-progress-bar",47)}const ht=function(){return["Ventas"]},gt=function(){return[5,10,25,100]},ft=[{path:"",redirectTo:"venta",pathMatch:"full"},{path:"venta",component:O},{path:"historial_venta",component:(()=>{var a;class r{constructor(n,e,o){this.matDialog=n,this._authService=e,this._ventaService=o,this.ventas=[],this.filtrado="",this.rowHeight=10,this.dataSource=new u.by(this.ventas),this.columnas=["No","cliente","fecha_venta","total","acciones"],this.titulosColumnas={No:"No.",cliente:"Nombre del Cliente",fecha_venta:"Fecha de Venta",total:"Total de Venta",acciones:"Acciones"},this.token=this._authService.getToken(),this.usuarioId=localStorage.getItem("_id")||""}ngOnInit(){this.obtener_venta()}obtener_venta(){this._ventaService.listar_venta(this.usuarioId,"",this.token).subscribe(n=>{console.log(n),this.ventas=n.data,this.ventas=this.ventas.map((e,o)=>({...e,No:o+1})),this.dataSource=new u.by(this.ventas),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filtro(){this.filtrado?(this._ventaService.listar_venta(this.usuarioId,this.filtrado,this.token).subscribe(n=>{this.ventas=n.data,this.ventas=this.ventas.map((e,o)=>({...e,No:o+1})),this.dataSource=new u.by(this.ventas),this.dataSource.paginator=this.paginator}),this._ventaService.listar_venta(this.usuarioId,this.filtrado,this.token).subscribe(n=>{this.ventas=n.data,this.ventas=this.ventas.map((e,o)=>({...e,No:o+1})),this.dataSource=new u.by(this.ventas),this.dataSource.paginator=this.paginator})):this.obtener_venta()}Detalle(n,e){this.matDialog.open(N,{data:{ventaId:n,usuarioId:e}})}eliminarEmpleado(n){var o,e=this;f().fire({title:"\xbfEst\xe1s seguro?",text:"Esta acci\xf3n eliminar\xe1 la Venta. \xbfEsta seguro de que deseas continuar?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, eliminar",confirmButtonColor:"#3a8f40",cancelButtonText:"Cancelar",cancelButtonColor:"#FF0000"}).then(function(m){return(o=o||(0,j.Z)(function*(g){if(g.isConfirmed)try{const S=yield e._ventaService.eliminar_venta(n,e.token).toPromise();console.log("Venta eliminada con \xe9xito:",S),f().fire("Venta eliminada","La Venta ha sido eliminada con \xe9xito","success").then(()=>{location.reload()})}catch(S){f().fire("Error","Ha ocurrido un error al tratar de eliminar la venta","error"),console.error("Error al eliminar la venta:",S)}})).apply(this,arguments)})}}return(a=r).\u0275fac=function(n){return new(n||a)(t.Y36(M.uw),t.Y36(_.e),t.Y36(d))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-historia-ventas"]],viewQuery:function(n,e){if(1&n&&(t.Gf(A.YE,5),t.Gf(V.NW,5)),2&n){let o;t.iGM(o=t.CRH())&&(e.sort=o.first),t.iGM(o=t.CRH())&&(e.paginator=o.first)}},decls:29,vars:14,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader",2,"background","#BFC9CA !important","border-radius","10px 10px 0px 0px"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["for","search-input"],[1,"material-icons","search-icon"],["name","filtro","placeholder","Busqueda de Clientes","type","text","aria-label","Search box",1,"browser-default","search-field",2,"width","210px !important",3,"ngModel","keyup","ngModelChange"],["filter",""],[1,"body","overflow-auto"],[1,"body","table-responsive"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","justify-content: center; display: flex",4,"ngIf"],["mode","buffer",4,"ngIf"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["acciones",""],["mat-icon-button","","matTooltip","Ver Detalle de Venta",3,"click"],[2,"color","#398f40"],["mat-icon-button","","matTooltip","Eliminar Venta",3,"click"],[2,"color","red"],["mat-header-row",""],["mat-row",""],[2,"justify-content","center","display","flex"],[1,"m-b-15",2,"padding","15px"],[1,"label","label-default"],["src","../../assets/images/icons/vacio.png","alt","",2,"opacity","20%","width","20rem"],["mode","buffer"]],template:function(n,e){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),t._uU(12,"Clientes"),t.qZA()(),t.TgZ(13,"li",11)(14,"label",12)(15,"i",13),t._uU(16,"search"),t.qZA()(),t.TgZ(17,"input",14,15),t.NdJ("keyup",function(){return e.filtro()})("ngModelChange",function(m){return e.filtrado=m}),t.qZA()()()()(),t.TgZ(19,"div",16)(20,"div",17)(21,"table",18),t.YNc(22,R,3,1,"ng-container",19),t.YNc(23,L,1,0,"tr",20),t.YNc(24,G,1,0,"tr",21),t.qZA(),t.YNc(25,$,4,0,"div",22),t.YNc(26,K,2,0,"div",22),t.YNc(27,X,1,0,"mat-progress-bar",23),t._UZ(28,"mat-paginator",24),t.qZA()()()()()()()),2&n&&(t.xp6(3),t.Q6J("title","Historial de Ventas")("items",t.DdM(12,tt))("active_item","Historial"),t.xp6(14),t.Q6J("ngModel",e.filtrado),t.xp6(4),t.Q6J("dataSource",e.dataSource),t.xp6(1),t.Q6J("ngForOf",e.columnas),t.xp6(1),t.Q6J("matHeaderRowDef",e.columnas),t.xp6(1),t.Q6J("matRowDefColumns",e.columnas),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(13,et)))},dependencies:[c.sg,c.O5,p.Fj,p.JJ,p.On,h.RK,U.Hw,V.NW,E.pW,A.YE,A.nU,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,J.gM,w.L,c.uU]}),r})()},{path:"venta_empleado",component:(()=>{var a;class r{constructor(n,e,o){this.matDialog=n,this._authService=e,this._ventaService=o,this.ventas=[],this.filtrado="",this.rowHeight=10,this.empleados={},this.dataSource=new u.by(this.ventas),this.columnas=["No","usuarioId","cliente","fecha_venta","total","acciones"],this.titulosColumnas={No:"No.",usuarioId:"Usuario",cliente:"Nombre del Cliente",fecha_venta:"Fecha de Venta",total:"Total de Venta",acciones:"Acciones"},this.token=this._authService.getToken()}ngOnInit(){this.obtener_venta()}obtener_venta(){this._ventaService.listar_ventas(this.token,"","").subscribe(n=>{this.ventas=n.data,console.log(this.ventas),this.ventas=this.ventas.map((e,o)=>({...e,No:o+1})),this.dataSource=new u.by(this.ventas),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}filtro(){this.fechaInicio&&this.fechaFin?this._ventaService.listar_ventas(this.token,this.fechaInicio,this.fechaFin).subscribe(n=>{this.ventas=n.data,this.ventas=this.ventas.map((e,o)=>({...e,No:o+1})),this.dataSource=new u.by(this.ventas),this.dataSource.paginator=this.paginator}):this.obtener_venta()}Detalle(n,e){this.matDialog.open(N,{data:{ventaId:n,usuarioId:e}})}borrarFechasSeleccionadas(){this.fechaInicio=null,this.fechaFin=null,this.filtro()}}return(a=r).\u0275fac=function(n){return new(n||a)(t.Y36(M.uw),t.Y36(_.e),t.Y36(d))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-detalle-venta-empresa"]],viewQuery:function(n,e){if(1&n&&(t.Gf(A.YE,5),t.Gf(V.NW,5)),2&n){let o;t.iGM(o=t.CRH())&&(e.sort=o.first),t.iGM(o=t.CRH())&&(e.paginator=o.first)}},decls:42,vars:15,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","items","active_item"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"materialTableHeader",2,"background","#BFC9CA !important","border-radius","10px 10px 0px 0px"],[1,"left"],[1,"header-buttons-left","ms-0"],[1,"tbl-title"],[1,"tbl-search-box"],["type","date","id","fechaInicio",3,"ngModel","ngModelChange"],["type","date","id","fechaFin",3,"ngModel","ngModelChange"],[1,"right"],[1,"tbl-export-btn"],[1,"tbl-header-btn"],["matTooltip","Filtrar",1,"m-l-10"],["mat-mini-fab","","color","primary",3,"click"],[1,"col-white"],["matTooltip","Limpiar",1,"m-l-10"],["mat-mini-fab","",3,"click"],[1,"body","overflow-auto"],[1,"body","table-responsive"],["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["style","justify-content: center; display: flex",4,"ngIf"],["mode","buffer",4,"ngIf"],[3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["columana",""],["acciones",""],["mat-icon-button","","matTooltip","Ver Detalle de Venta",3,"click"],[2,"color","#398f40"],["mat-header-row",""],["mat-row",""],[2,"justify-content","center","display","flex"],[1,"m-b-15",2,"padding","15px"],[1,"label","label-default"],["src","../../assets/images/icons/vacio.png","alt","",2,"opacity","20%","width","20rem"],["mode","buffer"]],template:function(n,e){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h2"),t._uU(12,"Seleccionar Fecha Inicial"),t.qZA()(),t.TgZ(13,"li",11)(14,"input",12),t.NdJ("ngModelChange",function(m){return e.fechaInicio=m}),t.qZA()(),t.TgZ(15,"li",10)(16,"h2"),t._uU(17,"Seleccionar Fecha Final"),t.qZA()(),t.TgZ(18,"li",11)(19,"input",13),t.NdJ("ngModelChange",function(m){return e.fechaFin=m}),t.qZA()()()(),t.TgZ(20,"div",14)(21,"ul",15)(22,"li",16)(23,"div",17)(24,"button",18),t.NdJ("click",function(){return e.filtro()}),t.TgZ(25,"mat-icon",19),t._uU(26,"format_paint"),t.qZA()()()(),t.TgZ(27,"li",16)(28,"div",20)(29,"button",21),t.NdJ("click",function(){return e.borrarFechasSeleccionadas()}),t.TgZ(30,"mat-icon",19),t._uU(31,"delete_sweep"),t.qZA()()()()()()(),t.TgZ(32,"div",22)(33,"div",23)(34,"table",24),t.YNc(35,ct,3,1,"ng-container",25),t.YNc(36,dt,1,0,"tr",26),t.YNc(37,pt,1,0,"tr",27),t.qZA(),t.YNc(38,mt,4,0,"div",28),t.YNc(39,ut,2,0,"div",28),t.YNc(40,_t,1,0,"mat-progress-bar",29),t._UZ(41,"mat-paginator",30),t.qZA()()()()()()()),2&n&&(t.xp6(3),t.Q6J("title","Historial de Ventas")("items",t.DdM(13,ht))("active_item","Ventas Empresa"),t.xp6(11),t.Q6J("ngModel",e.fechaInicio),t.xp6(5),t.Q6J("ngModel",e.fechaFin),t.xp6(15),t.Q6J("dataSource",e.dataSource),t.xp6(1),t.Q6J("ngForOf",e.columnas),t.xp6(1),t.Q6J("matHeaderRowDef",e.columnas),t.xp6(1),t.Q6J("matRowDefColumns",e.columnas),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("ngIf",0===e.dataSource.data.length),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(14,gt)))},dependencies:[c.sg,c.O5,p.Fj,p.JJ,p.On,h.RK,h.nh,U.Hw,V.NW,E.pW,A.YE,A.nU,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,J.gM,w.L,c.uU],styles:["input[type=date][_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px;width:100%;box-sizing:border-box}input[type=date][_ngcontent-%COMP%]:focus{outline-color:#4caf50}"]}),r})()}];let vt=(()=>{var a;class r{}return(a=r).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[T.Bz.forChild(ft),T.Bz]}),r})();var bt=s(1858);let Zt=(()=>{var a;class r{}return(a=r).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.ez,vt,v.m,bt.K]}),r})()}}]);